import{ag as Pe,r as p,a3 as Ne,j as e,c as be,a4 as De,Q as ee,P as te,V as A,N as se,O as Me,W as Ie,_ as Ae,$ as Oe,Z as Re,a0 as Se,a1 as Ee,R as _e,b as re,d as Te,as as u,B as f,C as Fe,k as ze,ab as ke,m as He,v as $e}from"./index-BCVF1PLb.js";import{I as Z}from"./input-CMYn3E83.js";import{C as Le}from"./checkbox-CLqVbJq_.js";import{c as oe,R as Ue,A as ae,C as Ge,a as We}from"./index-D9lbRThE.js";import{C as q}from"./calendar-CpAfWw-a.js";import{S as R,a as S,b as E,c as _,d as w}from"./select-B5ckg96L.js";import{L as Q}from"./label-gCXM_mwv.js";import{B as Ve}from"./badge-EtFkFwpi.js";import{t as Be,f as H,d as $}from"./de-B2K29ify.js";import{i as J}from"./isToday-DmJ7ZUUg.js";import{T as Ke}from"./trash-2-Doau15tD.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=Pe("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);function qe(s){return+Be(s)>Date.now()}var T="Popover",[ne,wt]=be(T,[oe]),O=oe(),[Qe,P]=ne(T),ie=s=>{const{__scopePopover:r,children:l,open:d,defaultOpen:a,onOpenChange:i,modal:c=!1}=s,h=O(r),g=p.useRef(null),[x,N]=p.useState(!1),[b,j]=Ne({prop:d,defaultProp:a??!1,onChange:i,caller:T});return e.jsx(Ue,{...h,children:e.jsx(Qe,{scope:r,contentId:De(),triggerRef:g,open:b,onOpenChange:j,onOpenToggle:p.useCallback(()=>j(C=>!C),[j]),hasCustomAnchor:x,onCustomAnchorAdd:p.useCallback(()=>N(!0),[]),onCustomAnchorRemove:p.useCallback(()=>N(!1),[]),modal:c,children:l})})};ie.displayName=T;var le="PopoverAnchor",Je=p.forwardRef((s,r)=>{const{__scopePopover:l,...d}=s,a=P(le,l),i=O(l),{onCustomAnchorAdd:c,onCustomAnchorRemove:h}=a;return p.useEffect(()=>(c(),()=>h()),[c,h]),e.jsx(ae,{...i,...d,ref:r})});Je.displayName=le;var ce="PopoverTrigger",de=p.forwardRef((s,r)=>{const{__scopePopover:l,...d}=s,a=P(ce,l),i=O(l),c=ee(r,a.triggerRef),h=e.jsx(te.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":xe(a.open),...d,ref:c,onClick:A(s.onClick,a.onOpenToggle)});return a.hasCustomAnchor?h:e.jsx(ae,{asChild:!0,...i,children:h})});de.displayName=ce;var U="PopoverPortal",[Xe,Ye]=ne(U,{forceMount:void 0}),ue=s=>{const{__scopePopover:r,forceMount:l,children:d,container:a}=s,i=P(U,r);return e.jsx(Xe,{scope:r,forceMount:l,children:e.jsx(se,{present:l||i.open,children:e.jsx(Me,{asChild:!0,container:a,children:d})})})};ue.displayName=U;var M="PopoverContent",pe=p.forwardRef((s,r)=>{const l=Ye(M,s.__scopePopover),{forceMount:d=l.forceMount,...a}=s,i=P(M,s.__scopePopover);return e.jsx(se,{present:d||i.open,children:i.modal?e.jsx(tt,{...a,ref:r}):e.jsx(st,{...a,ref:r})})});pe.displayName=M;var et=Oe("PopoverContent.RemoveScroll"),tt=p.forwardRef((s,r)=>{const l=P(M,s.__scopePopover),d=p.useRef(null),a=ee(r,d),i=p.useRef(!1);return p.useEffect(()=>{const c=d.current;if(c)return Ie(c)},[]),e.jsx(Ae,{as:et,allowPinchZoom:!0,children:e.jsx(he,{...s,ref:a,trapFocus:l.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:A(s.onCloseAutoFocus,c=>{var h;c.preventDefault(),i.current||(h=l.triggerRef.current)==null||h.focus()}),onPointerDownOutside:A(s.onPointerDownOutside,c=>{const h=c.detail.originalEvent,g=h.button===0&&h.ctrlKey===!0,x=h.button===2||g;i.current=x},{checkForDefaultPrevented:!1}),onFocusOutside:A(s.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),st=p.forwardRef((s,r)=>{const l=P(M,s.__scopePopover),d=p.useRef(!1),a=p.useRef(!1);return e.jsx(he,{...s,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var c,h;(c=s.onCloseAutoFocus)==null||c.call(s,i),i.defaultPrevented||(d.current||(h=l.triggerRef.current)==null||h.focus(),i.preventDefault()),d.current=!1,a.current=!1},onInteractOutside:i=>{var g,x;(g=s.onInteractOutside)==null||g.call(s,i),i.defaultPrevented||(d.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=i.target;((x=l.triggerRef.current)==null?void 0:x.contains(c))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),he=p.forwardRef((s,r)=>{const{__scopePopover:l,trapFocus:d,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:c,onEscapeKeyDown:h,onPointerDownOutside:g,onFocusOutside:x,onInteractOutside:N,...b}=s,j=P(M,l),C=O(l);return Re(),e.jsx(Se,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(Ee,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:N,onEscapeKeyDown:h,onPointerDownOutside:g,onFocusOutside:x,onDismiss:()=>j.onOpenChange(!1),children:e.jsx(Ge,{"data-state":xe(j.open),role:"dialog",id:j.contentId,...C,...b,ref:r,style:{...b.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),me="PopoverClose",rt=p.forwardRef((s,r)=>{const{__scopePopover:l,...d}=s,a=P(me,l);return e.jsx(te.button,{type:"button",...d,ref:r,onClick:A(s.onClick,()=>a.onOpenChange(!1))})});rt.displayName=me;var ot="PopoverArrow",at=p.forwardRef((s,r)=>{const{__scopePopover:l,...d}=s,a=O(l);return e.jsx(We,{...a,...d,ref:r})});at.displayName=ot;function xe(s){return s?"open":"closed"}var nt=ie,it=de,lt=ue,fe=pe;const X=nt,Y=it,L=_e.forwardRef(({className:s,align:r="center",sideOffset:l=4,...d},a)=>e.jsx(lt,{children:e.jsx(fe,{ref:a,align:r,sideOffset:l,className:re("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...d})}));L.displayName=fe.displayName;const ct=({isCompact:s=!1,coacheeId:r=null})=>{const{state:l,actions:d}=Te(),{tasks:a,coachees:i}=l,{setTasks:c}=d,[h,g]=p.useState(""),[x,N]=p.useState(null),[b,j]=p.useState(u.MEDIUM),[C,G]=p.useState(r?r.toString():"unassigned"),[m,D]=p.useState(null),[v,y]=p.useState("all"),ge=t=>{if(t.preventDefault(),h.trim()==="")return;const n={id:Date.now(),text:h,completed:!1,dueDate:x?x.toISOString():null,coacheeId:C==="unassigned"?null:parseInt(C),priority:b};c(o=>[n,...o||[]]),g(""),N(null),j(u.MEDIUM),r||G("unassigned")},ve=()=>{!m||m.text.trim()===""||(c(t=>(t||[]).map(n=>n.id===m.id?{...m,coacheeId:m.coacheeId==="unassigned"?null:parseInt(m.coacheeId),priority:m.priority}:n)),D(null))},W=t=>{c(n=>(n||[]).map(o=>o.id===t?{...o,completed:!o.completed}:o))},je=t=>{c(n=>(n||[]).filter(o=>o.id!==t))},Ce=t=>{D({...t,dueDate:t.dueDate?new Date(t.dueDate):null,coacheeId:t.coacheeId?t.coacheeId.toString():"unassigned",priority:t.priority||u.MEDIUM})},F=p.useMemo(()=>{let t=a||[];r?t=t.filter(o=>o.coacheeId===r):C!=="unassigned"&&(t=t.filter(o=>o.coacheeId===parseInt(C)));let n=[...t].sort((o,I)=>{if(o.completed!==I.completed)return o.completed?1:-1;const V={[u.HIGH]:1,[u.MEDIUM]:2,[u.LOW]:3},B=V[o.priority]||4,K=V[I.priority]||4;if(B!==K)return B-K;const z=o.dueDate?new Date(o.dueDate):null,k=I.dueDate?new Date(I.dueDate):null;return z&&k?z-k:z?-1:k?1:I.id-o.id});switch(v){case"today":return n.filter(o=>o.dueDate&&J(new Date(o.dueDate)));case"future":return n.filter(o=>o.dueDate&&qe(new Date(o.dueDate))&&!o.completed);case"no_date":return n.filter(o=>!o.dueDate);case"completed":return n.filter(o=>o.completed);case u.LOW:case u.MEDIUM:case u.HIGH:return n.filter(o=>o.priority===v);case"all":default:return n}},[a,v,r,C]),we=t=>{const n=i.find(o=>o.id===t);return n?`${n.firstName} ${n.lastName}`:"Unzugewiesen"},ye=t=>{switch(t){case u.HIGH:return"bg-red-500/20 text-red-400 border-red-500/30";case u.MEDIUM:return"bg-orange-500/20 text-orange-400 border-orange-500/30";case u.LOW:return"bg-blue-500/20 text-blue-400 border-blue-500/30";default:return"bg-slate-700/20 text-slate-400 border-slate-500/30"}};return e.jsxs("div",{children:[e.jsxs("form",{onSubmit:ge,className:"flex flex-wrap gap-2 mb-4 items-end",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx(Q,{htmlFor:"newTask",className:"sr-only",children:"Neue Aufgabe"}),e.jsx(Z,{id:"newTask",value:h,onChange:t=>g(t.target.value),placeholder:"Neue Aufgabe, Idee, Notiz...",className:"bg-slate-800/50 border-slate-700 text-white"})]}),!r&&e.jsxs("div",{className:"w-full sm:w-auto flex-shrink-0",children:[e.jsx(Q,{htmlFor:"assignCoachee",className:"sr-only",children:"Coachee zuweisen"}),e.jsxs(R,{onValueChange:G,value:C,children:[e.jsx(S,{id:"assignCoachee",className:"w-full sm:w-[180px] bg-slate-800/50 border-slate-700 text-white",children:e.jsx(E,{placeholder:"Coachee zuweisen"})}),e.jsxs(_,{className:"bg-slate-800 border-slate-700 text-white",children:[e.jsx(w,{value:"unassigned",children:"Keinem Coachee zuweisen"}),i.map(t=>e.jsxs(w,{value:String(t.id),children:[t.firstName," ",t.lastName]},t.id))]})]})]}),e.jsxs(X,{children:[e.jsx(Y,{asChild:!0,children:e.jsxs(f,{variant:"outline",className:`w-full sm:w-[150px] justify-start text-left font-normal ${!x&&"text-muted-foreground"}`,children:[e.jsx(Fe,{className:"mr-2 h-4 w-4"}),x?H(x,"dd.MM.yyyy"):e.jsx("span",{children:"Datum"})]})}),e.jsx(L,{className:"w-auto p-0",align:"start",children:e.jsx(q,{mode:"single",selected:x,onSelect:N,initialFocus:!0,locale:$})})]}),e.jsxs(R,{onValueChange:j,value:b,children:[e.jsx(S,{className:"w-full sm:w-[150px] bg-slate-800/50 border-slate-700 text-white",children:e.jsx(E,{placeholder:"Priorit√§t"})}),e.jsxs(_,{className:"bg-slate-800 border-slate-700 text-white",children:[e.jsx(w,{value:u.HIGH,children:"Dringend"}),e.jsx(w,{value:u.MEDIUM,children:"Mittel"}),e.jsx(w,{value:u.LOW,children:"Niedrig"})]})]}),e.jsx(f,{type:"submit",size:"icon",className:"w-full sm:w-auto",children:e.jsx(ze,{})})]}),e.jsxs("div",{className:"flex gap-2 mb-4 border-b border-slate-800 pb-2 flex-wrap",children:[e.jsx(f,{variant:v==="all"?"secondary":"ghost",size:"sm",onClick:()=>y("all"),children:"Alle"}),e.jsx(f,{variant:v==="today"?"secondary":"ghost",size:"sm",onClick:()=>y("today"),children:"Heute"}),e.jsx(f,{variant:v==="future"?"secondary":"ghost",size:"sm",onClick:()=>y("future"),children:"Zuk√ºnftig"}),e.jsx(f,{variant:v==="no_date"?"secondary":"ghost",size:"sm",onClick:()=>y("no_date"),children:"Ohne Datum"}),e.jsx(f,{variant:v==="completed"?"secondary":"ghost",size:"sm",onClick:()=>y("completed"),children:"Erledigt"}),e.jsx(f,{variant:v===u.HIGH?"secondary":"ghost",size:"sm",onClick:()=>y(u.HIGH),children:"Dringend"}),e.jsx(f,{variant:v===u.MEDIUM?"secondary":"ghost",size:"sm",onClick:()=>y(u.MEDIUM),children:"Mittel"}),e.jsx(f,{variant:v===u.LOW?"secondary":"ghost",size:"sm",onClick:()=>y(u.LOW),children:"Niedrig"})]}),e.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2",children:[e.jsx(ke,{children:F&&F.map(t=>e.jsxs(He.div,{layout:!0,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"flex items-center gap-3 p-2 rounded-md hover:bg-slate-800/50",children:[e.jsx(Le,{id:`task-${t.id}`,checked:t.completed,onCheckedChange:()=>W(t.id)}),(m==null?void 0:m.id)===t.id?e.jsxs("div",{className:"flex-1 flex flex-wrap gap-2 items-end",children:[e.jsx("div",{className:"flex-grow",children:e.jsx(Z,{value:m.text,onChange:n=>D({...m,text:n.target.value}),className:"bg-slate-800/50 border-slate-700 text-white",autoFocus:!0})}),!r&&e.jsx("div",{className:"w-full sm:w-auto flex-shrink-0",children:e.jsxs(R,{onValueChange:n=>D({...m,coacheeId:n}),value:m.coacheeId,children:[e.jsx(S,{className:"w-full sm:w-[180px] bg-slate-800/50 border-slate-700 text-white",children:e.jsx(E,{placeholder:"Coachee zuweisen"})}),e.jsxs(_,{className:"bg-slate-800 border-slate-700 text-white",children:[e.jsx(w,{value:"unassigned",children:"Keinem Coachee zuweisen"}),i.map(n=>e.jsxs(w,{value:String(n.id),children:[n.firstName," ",n.lastName]},n.id))]})]})}),e.jsxs(X,{children:[e.jsx(Y,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"sm",className:"w-full sm:w-[150px]",children:m.dueDate?H(m.dueDate,"dd.MM.yyyy"):"Datum"})}),e.jsx(L,{className:"w-auto p-0",children:e.jsx(q,{mode:"single",selected:m.dueDate,onSelect:n=>D({...m,dueDate:n}),locale:$})})]}),e.jsxs(R,{onValueChange:n=>D({...m,priority:n}),value:m.priority,children:[e.jsx(S,{className:"w-full sm:w-[150px] bg-slate-800/50 border-slate-700 text-white",children:e.jsx(E,{placeholder:"Priorit√§t"})}),e.jsxs(_,{className:"bg-slate-800 border-slate-700 text-white",children:[e.jsx(w,{value:u.HIGH,children:"Dringend"}),e.jsx(w,{value:u.MEDIUM,children:"Mittel"}),e.jsx(w,{value:u.LOW,children:"Niedrig"})]})]}),e.jsx(f,{size:"sm",onClick:ve,className:"w-full sm:w-auto",children:"Speichern"}),e.jsx(f,{size:"sm",variant:"ghost",onClick:()=>D(null),className:"w-full sm:w-auto",children:"Abbrechen"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>W(t.id),children:[e.jsx("label",{htmlFor:`task-${t.id}`,className:`text-sm cursor-pointer ${t.completed?"line-through text-slate-500":"text-slate-300"}`,children:t.text}),t.dueDate&&e.jsxs("p",{className:`text-xs ${J(new Date(t.dueDate))?"text-primary":"text-slate-500"}`,children:["F√§llig: ",H(new Date(t.dueDate),"dd. MMM yyyy",{locale:$})]}),t.coacheeId&&!r&&e.jsxs("p",{className:"text-xs text-slate-600",children:["Coachee: ",we(t.coacheeId)]}),t.priority&&e.jsxs(Ve,{variant:"secondary",className:re("mt-1",ye(t.priority)),children:[e.jsx(Ze,{className:"h-3 w-3 mr-1"})," ",t.priority===u.HIGH?"Dringend":t.priority===u.MEDIUM?"Mittel":"Niedrig"]})]}),e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>Ce(t),className:"text-slate-500 hover:text-primary",children:e.jsx($e,{className:"h-4 w-4"})}),e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>je(t.id),className:"text-slate-500 hover:text-red-500",children:e.jsx(Ke,{className:"h-4 w-4"})})]})]},t.id))}),F.length===0&&e.jsx("p",{className:"text-center text-slate-500 py-4",children:"Keine Aufgaben in dieser Ansicht."})]})]})},yt=Object.freeze(Object.defineProperty({__proto__:null,default:ct},Symbol.toStringTag,{value:"Module"}));export{Ze as F,ct as T,yt as a};
