import{j as e,e as G,f as J,g as W,a7 as ae,h as q,B as b,r as n,a3 as le,c as oe,a4 as ce,P as V,V as de,N as he,Q as me,a as ue,S as pe,v as ge,R as fe,D as xe,G as be,n as je,o as ve,p as we,q as ke,s as Ce,t as ye,d as Se,i as Ne,H as Ae,aa as Ie,w as ze,ab as Pe,m as De}from"./index-BCVF1PLb.js";import{S as B,a as K,b as F,c as M,d as S,C as Ee}from"./select-B5ckg96L.js";import{L as T}from"./label-gCXM_mwv.js";import{I as L}from"./input-CMYn3E83.js";import{K as Te}from"./key-round-NqSuZ4IQ.js";import{S as Re}from"./save-BLsd0mx1.js";import{E as Be,S as Ke}from"./users-round-BZPTP302.js";import{A as Fe,a as Me,b as Le,c as Oe,d as Ge,e as We,f as Ve,g as Ze,h as _e}from"./alert-dialog-C4_CwsSl.js";import{T as Ue}from"./textarea-Ei5qcXJt.js";import{F as He}from"./FileSaver.min-C6hR5fcS.js";import{B as $e,W as Je,R as qe}from"./wand-2-CMYYnvZS.js";import{T as Qe}from"./trash-2-Doau15tD.js";import{P as Xe}from"./plus-circle-CsZ-giTn.js";import{U as Ye}from"./upload-DSGQNpdk.js";import{D as es}from"./download-DKg7zGZ5.js";import{g as ss,r as ts}from"./StepContent-b4lK0HZx.js";import{U as ns}from"./user-CaCbtgVu.js";import{C as rs}from"./chevron-left-B6OT_W-B.js";import{S as is}from"./send-DnfGf0z0.js";import{S as as}from"./share-2-lsO2aeSV.js";import{C as ls}from"./chevron-right-CVrpxHPZ.js";import"./floating-ui.react-dom-DMRTrF13.js";import"./check-C26bXOMj.js";const os=[{id:"Phase I",name:"Problem- & Zielbeschreibung"},{id:"Phase II",name:"Problemanalyse"},{id:"Phase III",name:"Lösungsstrategie"},{id:"Phase IV",name:"Abschluss & Transfer"}],cs=({currentPhase:t,steps:c})=>e.jsx("nav",{"aria-label":"Progress",children:e.jsx("ol",{role:"list",className:"space-y-4 md:flex md:space-x-8 md:space-y-0",children:c.map((i,r)=>e.jsx("li",{className:"md:flex-1",children:r<=t?e.jsxs("div",{className:"group flex flex-col border-l-4 py-2 pl-4 md:border-l-0 md:border-t-4 md:pl-0 md:pt-4 md:pb-0",style:{borderColor:r===t?"var(--primary)":"#4f46e5"},children:[e.jsx("span",{className:"text-sm font-medium",style:{color:r===t?"var(--primary)":"#a5b4fc"},children:i.id}),e.jsx("span",{className:"text-sm font-medium text-white",children:i.name})]}):e.jsxs("div",{className:"group flex flex-col border-l-4 border-gray-600 py-2 pl-4 hover:border-gray-500 md:border-l-0 md:border-t-4 md:pl-0 md:pt-4 md:pb-0",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500 group-hover:text-gray-400",children:[" "," ",i.id]}),e.jsxs("span",{className:"text-sm font-medium text-gray-400",children:[" "," ",i.name]})]})},i.name))})}),ds=({aiSettings:t,onUpdateAiSetting:c,toast:i})=>e.jsxs(G,{className:"glass-card",children:[e.jsx(J,{children:e.jsxs(W,{className:"text-white flex items-center gap-2",children:[e.jsx(ae,{})," KI-Assistent"]})}),e.jsxs(q,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(T,{className:"text-sm font-medium text-slate-300 mb-2 block",children:"KI-Modell"}),e.jsxs(B,{value:t.selectedModel||"local",onValueChange:r=>c("selectedModel",r),children:[e.jsx(K,{children:e.jsx(F,{})}),e.jsxs(M,{children:[e.jsx(S,{value:"local",children:"Integrierter Coach-Bot (Lokal)"}),e.jsx(S,{value:"openai-gpt4",children:"OpenAI: GPT-4"}),e.jsx(S,{value:"anthropic-claude",children:"Anthropic: Claude 3"})]})]})]}),t.selectedModel&&t.selectedModel!=="local"&&e.jsxs("div",{children:[e.jsxs(T,{className:"text-sm font-medium text-slate-300 flex items-center gap-2 mb-2",children:[e.jsx(Te,{className:"h-4 w-4"})," API-Schlüssel für ",t.selectedModel]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{type:"password",placeholder:"sk-...",value:t.apiKey||"",onChange:r=>c("apiKey",r.target.value)}),e.jsx(b,{size:"icon",onClick:()=>i({title:"API-Schlüssel lokal gespeichert!"}),children:e.jsx(Re,{className:"h-4 w-4"})})]}),e.jsxs("a",{href:"https://platform.openai.com/playground",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline mt-2 inline-flex items-center gap-1",children:["Zum OpenAI Playground ",e.jsx(Be,{className:"h-3 w-3"})]})]})]})]});var O="Collapsible",[hs,Zs]=oe(O),[ms,Z]=hs(O),Q=n.forwardRef((t,c)=>{const{__scopeCollapsible:i,open:r,defaultOpen:o,disabled:d,onOpenChange:a,...w}=t,[u,j]=le({prop:r,defaultProp:o??!1,onChange:a,caller:O});return e.jsx(ms,{scope:i,disabled:d,contentId:ce(),open:u,onOpenToggle:n.useCallback(()=>j(x=>!x),[j]),children:e.jsx(V.div,{"data-state":U(u),"data-disabled":d?"":void 0,...w,ref:c})})});Q.displayName=O;var X="CollapsibleTrigger",Y=n.forwardRef((t,c)=>{const{__scopeCollapsible:i,...r}=t,o=Z(X,i);return e.jsx(V.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":U(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:c,onClick:de(t.onClick,o.onOpenToggle)})});Y.displayName=X;var _="CollapsibleContent",ee=n.forwardRef((t,c)=>{const{forceMount:i,...r}=t,o=Z(_,t.__scopeCollapsible);return e.jsx(he,{present:i||o.open,children:({present:d})=>e.jsx(us,{...r,ref:c,present:d})})});ee.displayName=_;var us=n.forwardRef((t,c)=>{const{__scopeCollapsible:i,present:r,children:o,...d}=t,a=Z(_,i),[w,u]=n.useState(r),j=n.useRef(null),x=me(c,j),p=n.useRef(0),k=p.current,g=n.useRef(0),N=g.current,A=a.open||w,C=n.useRef(A),y=n.useRef(void 0);return n.useEffect(()=>{const s=requestAnimationFrame(()=>C.current=!1);return()=>cancelAnimationFrame(s)},[]),ue(()=>{const s=j.current;if(s){y.current=y.current||{transitionDuration:s.style.transitionDuration,animationName:s.style.animationName},s.style.transitionDuration="0s",s.style.animationName="none";const l=s.getBoundingClientRect();p.current=l.height,g.current=l.width,C.current||(s.style.transitionDuration=y.current.transitionDuration,s.style.animationName=y.current.animationName),u(r)}},[a.open,r]),e.jsx(V.div,{"data-state":U(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!A,...d,ref:x,style:{"--radix-collapsible-content-height":k?`${k}px`:void 0,"--radix-collapsible-content-width":N?`${N}px`:void 0,...t.style},children:A&&o})});function U(t){return t?"open":"closed"}var ps=Q;const gs=ps,fs=Y,xs=ee,$=({onSave:t,trigger:c,existingPrompt:i})=>{const[r,o]=n.useState(""),[d,a]=n.useState(""),[w,u]=n.useState(""),[j,x]=n.useState(!1),p=!!i;fe.useEffect(()=>{j&&p?(o(i.title),a(i.category),u(i.prompt)):p||(o(""),a(""),u(""))},[j,i,p]);const k=()=>{if(r&&d&&w){const g={...i,id:(i==null?void 0:i.id)||Date.now(),title:r,category:d,prompt:w};t(g),x(!1)}};return e.jsxs(xe,{open:j,onOpenChange:x,children:[e.jsx(be,{asChild:!0,children:c}),e.jsxs(je,{children:[e.jsxs(ve,{children:[e.jsx(we,{children:p?"Prompt bearbeiten":"Neuen Prompt erstellen"}),e.jsx(ke,{children:p?"Passe den bestehenden Prompt an.":"Füge einen neuen, wiederverwendbaren Prompt zu deiner Bibliothek hinzu."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"prompt-title",children:"Titel"}),e.jsx(L,{id:"prompt-title",value:r,onChange:g=>o(g.target.value),placeholder:"z.B. Ressourcenorientiertes Feedback"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"prompt-category",children:"Kategorie"}),e.jsx(L,{id:"prompt-category",value:d,onChange:g=>a(g.target.value),placeholder:"z.B. Analyse"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"prompt-text",children:"Prompt-Text"}),e.jsx(Ue,{id:"prompt-text",value:w,onChange:g=>u(g.target.value),placeholder:"Der eigentliche Prompt-Text...",className:"h-32"})]})]}),e.jsxs(Ce,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(b,{variant:"outline",children:"Abbrechen"})}),e.jsx(b,{onClick:k,children:p?"Änderungen speichern":"Speichern"})]})]})]})},bs=({aiSettings:t,onUpdateAiSetting:c,onSetUserInput:i,toast:r})=>{const[o,d]=n.useState(""),[a,w]=n.useState("title-asc"),[u,j]=n.useState("all"),x=n.useRef(null),p=s=>{const l=t.prompts||[],h=l.findIndex(v=>v.id===s.id);let f;h>-1?(f=[...l],f[h]=s,r({title:"Prompt aktualisiert!",description:"Die Änderungen wurden gespeichert."})):(f=[...l,s],r({title:"Prompt hinzugefügt!",description:"Dein neuer Prompt ist in der Bibliothek verfügbar."})),c("prompts",f)},k=s=>{const l=(t.prompts||[]).filter(h=>h.id!==s);c("prompts",l),r({title:"Prompt gelöscht!",variant:"destructive"})},g=()=>{const s=t.prompts||[];if(s.length===0){r({title:"Export nicht möglich",description:"Deine Bibliothek ist leer.",variant:"destructive"});return}const l=new Blob([JSON.stringify(s,null,2)],{type:"application/json"});He.saveAs(l,"coachingspace_prompts.json"),r({title:"Prompts exportiert!",description:"Deine Bibliothek wurde als JSON-Datei gespeichert."})},N=()=>{x.current.click()},A=s=>{const l=s.target.files[0];if(!l)return;const h=new FileReader;h.onload=f=>{try{const v=JSON.parse(f.target.result);if(!Array.isArray(v))throw new Error("JSON ist kein Array.");const I=t.prompts||[],z=new Set(I.map(E=>E.id)),P=v.filter(E=>!z.has(E.id)),D=[...I,...P];c("prompts",D),r({title:"Import erfolgreich!",description:`${P.length} neue(r) Prompt(s) hinzugefügt. ${v.length-P.length} Duplikat(e) übersprungen.`})}catch(v){r({title:"Import fehlgeschlagen",description:`Die Datei konnte nicht verarbeitet werden: ${v.message}`,variant:"destructive"})}},h.readAsText(l),s.target.value=null},C=n.useMemo(()=>{let s=t.prompts||[];return o&&(s=s.filter(l=>l.title.toLowerCase().includes(o.toLowerCase())||l.prompt.toLowerCase().includes(o.toLowerCase()))),u!=="all"&&(s=s.filter(l=>l.category===u)),s.sort((l,h)=>{const[f,v]=a.split("-");if(!l[f]||!h[f])return 0;const I=l[f].toLowerCase(),z=h[f].toLowerCase();return I<z?v==="asc"?-1:1:I>z?v==="asc"?1:-1:0}),s},[t.prompts,o,u,a]),y=n.useMemo(()=>{const s=new Set((t.prompts||[]).map(l=>l.category).filter(Boolean));return["all",...Array.from(s)]},[t.prompts]);return e.jsx(G,{className:"glass-card",children:e.jsxs(gs,{defaultOpen:!0,children:[e.jsx(fs,{asChild:!0,children:e.jsxs("div",{className:"p-4 cursor-pointer flex justify-between items-center",children:[e.jsxs(W,{className:"text-white flex items-center gap-2",children:[e.jsx($e,{})," Prompt-Bibliothek"]}),e.jsx(b,{variant:"ghost",size:"sm",children:e.jsx(Ee,{className:"h-4 w-4"})})]})}),e.jsxs(xs,{className:"px-4 pb-4 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(L,{placeholder:"Suchen...",className:"pl-10",value:o,onChange:s=>d(s.target.value)})]}),e.jsxs(B,{value:u,onValueChange:j,children:[e.jsx(K,{className:"w-full sm:w-[120px]",children:e.jsx(F,{})}),e.jsx(M,{children:y.map(s=>e.jsx(S,{value:s,children:s==="all"?"Alle":s},s))})]}),e.jsxs(B,{value:a,onValueChange:w,children:[e.jsx(K,{className:"w-full sm:w-[120px]",children:e.jsx(F,{})}),e.jsxs(M,{children:[e.jsx(S,{value:"title-asc",children:"Titel (A-Z)"}),e.jsx(S,{value:"title-desc",children:"Titel (Z-A)"}),e.jsx(S,{value:"category-asc",children:"Kategorie (A-Z)"}),e.jsx(S,{value:"category-desc",children:"Kategorie (Z-A)"})]})]})]}),e.jsx("div",{className:"space-y-2 max-h-72 overflow-y-auto pr-2",children:C.map(s=>e.jsx("div",{className:"p-3 bg-slate-800/50 rounded-lg group",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>i(s.prompt),children:[e.jsx("h4",{className:"font-semibold text-slate-200",children:s.title}),e.jsx("p",{className:"text-xs text-slate-400 mb-1",children:s.category}),e.jsx("p",{className:"text-sm text-slate-400 line-clamp-2",children:s.prompt})]}),e.jsxs("div",{className:"flex opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx($,{onSave:p,existingPrompt:s,trigger:e.jsx(b,{variant:"ghost",size:"icon",children:e.jsx(ge,{className:"h-4 w-4"})})}),e.jsxs(Fe,{children:[e.jsx(Me,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",children:e.jsx(Qe,{className:"h-4 w-4 text-red-500"})})}),e.jsxs(Le,{children:[e.jsxs(Oe,{children:[e.jsx(Ge,{children:"Prompt wirklich löschen?"}),e.jsxs(We,{children:['Diese Aktion kann nicht rückgängig gemacht werden. Der Prompt "',s.title,'" wird dauerhaft gelöscht.']})]}),e.jsxs(Ve,{children:[e.jsx(Ze,{children:"Abbrechen"}),e.jsx(_e,{onClick:()=>k(s.id),className:"bg-red-600 hover:bg-red-700",children:"Löschen"})]})]})]})]})]})},s.id))}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsx($,{onSave:p,trigger:e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(Xe,{className:"mr-2 h-4 w-4"})," Prompt hinzufügen"]})}),e.jsxs(b,{variant:"outline",size:"sm",onClick:N,children:[e.jsx(Ye,{className:"mr-2 h-4 w-4"})," Importieren"]}),e.jsx("input",{type:"file",ref:x,onChange:A,accept:".json",style:{display:"none"}}),e.jsxs(b,{variant:"outline",size:"sm",onClick:g,children:[e.jsx(es,{className:"mr-2 h-4 w-4"})," Exportieren"]})]})]})]})})},js={step1:"Vielen Dank für deine Offenheit. Es ist total verständlich, dass du dich in dieser Situation überfordert fühlst. Viele Menschen in ähnlichen Positionen erleben das. Was ich aber schon jetzt heraushöre, ist dein starker Wille, etwas zu verändern und deine Fähigkeit, die Situation klar zu beschreiben. Das ist eine fantastische Ausgangslage!",step2:`Basierend auf deinen Schilderungen habe ich deine Situation zusammengefasst:

**IST-Situation:** Ich fühle mich in meiner aktuellen Rolle fremdbestimmt und reagiere oft nur noch auf die Anforderungen anderer. Das führt dazu, dass ich abends erschöpft bin und das Gefühl habe, nicht voranzukommen.

**SOLL-Situation:** Ich möchte meine Aufgaben proaktiv gestalten und klare Prioritäten setzen. Ich will am Ende des Tages das Gefühl haben, das Wichtigste geschafft zu haben und wieder mehr Energie für mich zu haben.

Stimmt das so für dich?`,step3:"Das Bild des Bergsteigers auf dem Gipfel in Verbindung mit deinem Ziel, deine Aufgaben proaktiv zu gestalten, ist sehr kraftvoll. Es scheint, als ob 'Ankommen' und 'Übersicht gewinnen' für dich zentrale emotionale Anker sind. Das Bild symbolisiert nicht nur den erreichten Erfolg, sondern auch den anstrengenden, aber lohnenden Weg dorthin. Die Klarheit und Weite auf dem Gipfel stehen im starken Kontrast zu deinem Gefühl der Fremdbestimmung.",step4:`Um das Bild noch klarer zu machen, lass uns prüfen, ob ein Aspekt fehlt. Oft liegen solche Herausforderungen in einem von drei Bereichen. Wo erkennst du dich am ehesten wieder?

1.  **Können:** Fehlt dir vielleicht eine spezifische Fähigkeit oder Methode (z.B. eine Zeitmanagement-Technik)?
2.  **Wollen:** Gibt es einen unbewussten inneren Anteil, der sich gegen die Veränderung sträubt, vielleicht aus Angst vor mehr Verantwortung?
3.  **Dürfen:** Gibt es äußere Umstände oder Personen in deinem Umfeld, die dich daran hindern, proaktiver zu handeln?`,step5:"Danke, das hilft sehr. Lass uns nun die Schlüsselsituation genauer betrachten. Du beschreibst, dass das Gefühl der Überforderung am stärksten ist, wenn morgens unerwartete, dringende Anfragen per E-Mail kommen. Der Schlüsselaffekt, der dabei mitschwingt, scheint eine Mischung aus **Ohnmacht** (die Kontrolle zu verlieren) und **Frustration** (die eigenen Pläne durchkreuzt zu sehen) zu sein. Könnte das zutreffen?",step7:`Analyse des Interviews mit der 'Bremse':

**Zusätzliche Argumente der Bremse:**
- 'Wenn ich mehr Verantwortung übernehme, habe ich auch mehr Angriffsfläche für Kritik.'
- 'Bisher hat es doch auch immer irgendwie geklappt, warum also das Risiko eingehen?'

**Ranking der Ausbalancierungsdimensionen:**
1.  **Wollen (Primär):** Ein starker innerer Anteil fürchtet die Konsequenzen des Erfolgs (Neid, mehr Arbeit).
2.  **Dürfen (Sekundär):** Das Verhalten des Teamchefs scheint passives Verhalten zu belohnen.

**Kausaler Zusammenhang:** Die Angst vor den negativen Seiten des Erfolgs ('Wollen') wird durch das Umfeld ('Dürfen') verstärkt, was die aktuelle Problematik stabilisiert.`,step8:`Vorschlag für ein übergeordnetes Lern- und Entwicklungsziel:

'Ich lerne, meine berufliche Wirksamkeit selbstbewusst zu gestalten und anzunehmen, indem ich proaktiv handle und meine Erfolge als positiven Beitrag für mich und das Unternehmen wertschätze.'`,step10:`Analyse der Widerstände:

Basierend auf dem Interview mit den Widerstands-Anteilen lassen sich folgende Muster und Glaubenssätze erkennen:

- **Perfektionismus:** 'Wenn ich etwas nicht 120% perfekt machen kann, fange ich es lieber gar nicht erst an.' (Regel der Realitätswahrnehmung)
- **Anerkennungsstreben:** 'Ich muss es allen recht machen, um gemocht zu werden.' (Handlungsstrategie)
- **Zurückhaltung:** 'Wenn ich meine Meinung sage, könnte das zu Konflikten führen, die ich nicht aushalte.' (Willensbildung)`,step11:`Hier ist ein Entwurf für deine persönliche Erfolgsimagination:

'Ich stehe auf dem Gipfel, genau wie auf dem Bild, das ich gewählt habe. Die Luft ist klar, und ich blicke weit über die Landschaft unter mir. Dieses Gefühl von Übersicht und Ruhe ist jetzt mein ständiger Begleiter im Arbeitsalltag. An die Stelle der Ohnmacht ist ein Gefühl von **souveräner Gelassenheit** getreten. Ich sehe neue Aufgaben nicht mehr als Bedrohung, sondern als interessante Herausforderungen, die ich mit Freude annehme. Ich gestalte meinen Tag und bin stolz auf das, was ich bewirke.'`,step12:`Projektplan basierend auf der Erfolgsimagination:

**Projekt: Souveräne Gelassenheit im Job**

1.  **Meilenstein 1 (Woche 1-2): Proaktive Tagesplanung**
    - Aktion: Jeden Morgen 15 Min. blocken, um die Top 3 Prioritäten des Tages festzulegen.
    - Messung: Tägliches Journal: Wie oft habe ich mich an meine Prioritäten gehalten?

2.  **Meilenstein 2 (Woche 3-4): Grenzen setzen**
    - Aktion: Mindestens 2x pro Woche eine nicht dringende Anfrage höflich ablehnen oder delegieren.
    - Messung: Notizen über die Situationen und das Ergebnis.

**Mentaltraining:** Täglich morgens 3 Minuten die Erfolgsimagination visualisieren.`},vs=t=>({1:{title:"Schritt 1: Erste Problem- & Zielbeschreibung",description:"Rapportaufbau und erste Problembeschreibung durch den Coachee."},2:{title:"Schritt 2: Erweiterte Problem- & Zielbeschreibung",description:"Vertiefung durch zusätzliche Informationen zur Ist- und Soll-Situation."},3:{title:"Schritt 3: Immersive Bildarbeit",description:"Emotionale Visualisierung des Ziels mithilfe von Bildern und anschließende KI-Analyse."},4:{title:"Schritt 4: Überprüfung auf fehlende Informationen",description:'Klärung offener Punkte mittels KI-generierter Fragen zu "Ausbalancierungsproblemen".'},5:{title:"Schritt 5: Bestimmung von Schlüsselsituation & Schlüsselaffekt",description:"Identifikation der Situationen, in denen das Problem am stärksten auftritt, und des zugrundeliegenden Affekts."},6:{title:"Schritt 6: Tiefenpsychologisches Interview mit Avataren",description:"Intuitive Identifizierung von Persönlichkeitsanteilen mittels Aufstellungsarbeit."},7:{title:"Schritt 7: KI-Auswertung des Interviews",description:"Die KI analysiert das Transkript, um Argumente, Dimensionen und Zusammenhänge aufzudecken."},8:{title:"Schritt 8: Identifikation des übergeordneten Ziels",description:'Entwicklung eines übergeordneten Lern- und Entwicklungsziels ("Ziel hinter dem Ziel").'},9:{title:"Schritt 9: Antizipieren von Umsetzungswiderständen",description:"Erneute Aufstellungsarbeit zur Visualisierung von inneren Widerständen und Gewohnheiten."},10:{title:"Schritt 10: KI-Analyse der Widerstände",description:"Die KI analysiert die Regeln und Glaubenssätze hinter den geäußerten Widerständen."},11:{title:"Schritt 11: Entwicklung einer Erfolgsimagination",description:"Erstellung einer lebhaften mentalen Vorwegnahme des Erfolgs zur Umtrainierung des Schlüsselaffekts."},12:{title:"Schritt 12: Konkretisierung und Projektplan",description:"Übertragung der Imagination in einen konkreten Projektplan für die praktische Umsetzung."}})[t]||{},_s=()=>{const{state:t,actions:c}=Se(),{coachees:i,settings:r}=t,{setSettings:o}=c,{toast:d}=Ne(),[a,w]=n.useState(1),[u,j]=n.useState(""),[x,p]=n.useState(""),[k,g]=n.useState(""),[N,A]=n.useState(!1),[C,y]=n.useState(null),[s,l]=n.useState(r.ai||{}),h=n.useRef(null),f=n.useCallback(()=>{if(h.current){const m={type:"update",payload:{step:a,input:x,output:k,selectedImage:C,avatars:ss(a)}};h.current.postMessage(m)}},[a,x,k,C]);n.useEffect(()=>{h.current=new BroadcastChannel("ai_coaching_channel");const m=R=>{R.data&&R.data.type==="ready"&&f()};return h.current.addEventListener("message",m),()=>{h.current&&(h.current.removeEventListener("message",m),h.current.close())}},[f]),n.useEffect(()=>{f()},[a,x,k,C,f]);const v=(m,R)=>{const H={...s,[m]:R};l(H),o(ie=>({...ie,ai:H}))},I=()=>{if(!u){d({title:"Fehler",description:"Bitte wähle zuerst einen Coachee aus.",variant:"destructive"});return}A(!0),g(""),setTimeout(()=>{const m=js[`step${a}`]||"Für diesen Schritt ist keine KI-Antwort konfiguriert.";g(m),A(!1)},1500)},z=()=>{window.open("/ai-coaching/shared","_blank","width=800,height=600,resizable=yes,scrollbars=yes"),d({title:"Freigabe-Fenster geöffnet",description:"Das Fenster für den Coachee ist bereit."})},P=Math.floor((a-1)/4),D=()=>{g(""),p(""),y(null)},E=()=>{a<12&&(w(m=>m+1),D())},se=()=>{a>1&&(w(m=>m-1),D())},te=()=>{D(),d({title:"Eingaben zurückgesetzt"})},{title:ne,description:re}=vs(a);return e.jsxs(e.Fragment,{children:[e.jsxs(Ae,{children:[e.jsx("title",{children:"KI-Coaching - Coachingspace"}),e.jsx("meta",{name:"description",content:"Triadisches Coaching mit KI-Unterstützung zur intensiven Problemanalyse und Lösungsfindung."})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"flex-1 space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[e.jsx(Ie,{})," KI-Coaching Modul"]}),e.jsx("p",{className:"text-slate-400",children:"Geführter Prozess für das triadische Coaching (Coach, Coachee, KI)."})]}),e.jsx(cs,{currentPhase:P,steps:os}),e.jsxs(G,{className:"glass-card",children:[e.jsxs(J,{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-white",children:ne}),e.jsx(ze,{className:"text-gray-300",children:re})," "]}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs(B,{value:u,onValueChange:j,children:[e.jsx(K,{children:e.jsx(F,{placeholder:"Coachee auswählen..."})}),e.jsx(M,{children:i.map(m=>e.jsxs(S,{value:m.id.toString(),children:[m.firstName," ",m.lastName]},m.id))})]})})]}),e.jsxs(q,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-white flex items-center",children:[e.jsx(ns,{className:"mr-2"}),"Eingabe (Coach & Coachee)"]}),e.jsx(Pe,{mode:"wait",children:e.jsx(De.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},children:ts(a,x,p,C,y)},a)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-white flex items-center",children:[e.jsx(Ke,{className:"mr-2 text-primary"}),"KI-Feedback"]}),e.jsx("div",{className:"min-h-[150px] bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:N?e.jsxs("div",{className:"flex items-center justify-center h-full",children:[e.jsx(Je,{className:"h-8 w-8 text-primary animate-pulse"}),e.jsx("p",{className:"ml-4 text-slate-400",children:"KI generiert Feedback..."})]}):e.jsx("p",{className:"text-slate-300 whitespace-pre-wrap",children:k||"Hier erscheint die Antwort der KI..."})})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(b,{variant:"outline",onClick:se,disabled:a===1,children:[e.jsx(rs,{className:"mr-2 h-4 w-4"})," Vorheriger Schritt"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{variant:"ghost",onClick:te,children:[e.jsx(qe,{className:"mr-2 h-4 w-4"})," Reset"]}),e.jsxs(b,{onClick:I,disabled:N||!x&&!C,className:"bg-primary hover:bg-primary/90",children:[e.jsx(is,{className:"mr-2 h-4 w-4"})," ",N?"Generiere...":"An KI senden"]}),e.jsxs(b,{variant:"secondary",onClick:z,title:"Für Coachee freigeben",children:[e.jsx(as,{className:"mr-2 h-4 w-4"})," Freigeben"]})]}),e.jsxs(b,{variant:"outline",onClick:E,disabled:a===12,children:["Nächster Schritt ",e.jsx(ls,{className:"ml-2 h-4 w-4"})]})]})]}),e.jsxs("aside",{className:"w-full lg:w-96 space-y-6",children:[e.jsx(ds,{aiSettings:s,onUpdateAiSetting:v,toast:d}),e.jsx(bs,{aiSettings:s,onUpdateAiSetting:v,onSetUserInput:p,toast:d})]})]})]})};export{_s as default};
