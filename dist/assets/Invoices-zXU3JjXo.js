import{r as i,j as e,D as Ge,n as Ke,o as ze,p as Ue,s as $e,t as Be,B as b,i as Ce,e as $,f as Ve,g as He,w as Ye,h as B,v as Me,k as X,K as D,m as nn,F as ke,C as qe,c as Xe,M as rn,u as We,N as ue,O as sn,Q as Z,V as w,W as an,P as V,Y as on,Z as cn,_ as ln,$ as dn,a0 as un,a1 as mn,a2 as Qe,a3 as pn,a4 as Fe,R as O,b as L,q as hn,d as fn,A as xn,H as gn}from"./index-BCVF1PLb.js";import{d as Ze,I as vn,R as jn,T as wn,a as Nn,b as we,c as Ne}from"./tabs-D-qa9ZUa.js";import{I as ie}from"./input-CMYn3E83.js";import{L as F}from"./label-gCXM_mwv.js";import{T as bn}from"./textarea-Ei5qcXJt.js";import{S as Cn}from"./save-BLsd0mx1.js";import{T as Je}from"./trash-2-Doau15tD.js";import{B as et}from"./badge-EtFkFwpi.js";import{S as re,a as se,b as ae,c as oe,d as E}from"./select-B5ckg96L.js";import{g as Mn}from"./pdf-DOpULH4B.js";import{C as Sn}from"./clock-BzT5nvLL.js";import{A as Rn,R as tt,M as yn,P as Dn}from"./repeat-OAJDEsfS.js";import{C as _n}from"./check-circle-DyRGt_RB.js";import{U as nt}from"./user-CaCbtgVu.js";import{D as In}from"./download-DKg7zGZ5.js";import{u as En}from"./index-CTsaMBSn.js";import{c as rt,R as Pn,A as An,C as Tn,a as On}from"./index-D9lbRThE.js";import{C as kn}from"./chevron-right-CVrpxHPZ.js";import{C as Fn}from"./check-C26bXOMj.js";import{C as Ln}from"./circle-BXcq3N7T.js";import{P as Gn}from"./play-CadWJtWA.js";import"./floating-ui.react-dom-DMRTrF13.js";import"./jspdf.es.min-BgNKXESA.js";import"./de-B2K29ify.js";import"./index-B8MATRhp.js";const Kn=({open:t,onOpenChange:r,onSave:n,rate:s})=>{const[a,o]=i.useState(""),[l,u]=i.useState(""),[p,f]=i.useState("");i.useEffect(()=>{s?(o(s.name),u(s.description),f(String(s.price))):(o(""),u(""),f(""))},[s,t]);const m=()=>{const c={id:s?s.id:Date.now(),name:a,description:l,price:parseFloat(p)||0};n(c)};return e.jsx(Ge,{open:t,onOpenChange:r,children:e.jsxs(Ke,{className:"glass-card",children:[e.jsx(ze,{children:e.jsx(Ue,{children:s?"Honorarsatz bearbeiten":"Neuer Honorarsatz"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(F,{htmlFor:"rate-name",children:"Name"}),e.jsx(ie,{id:"rate-name",value:a,onChange:c=>o(c.target.value),placeholder:"z.B. Standard Coaching-Session"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(F,{htmlFor:"rate-desc",children:"Beschreibung"}),e.jsx(bn,{id:"rate-desc",value:l,onChange:c=>u(c.target.value),placeholder:"z.B. 60 Minuten 1:1 Coaching"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(F,{htmlFor:"rate-price",children:"Preis (€)"}),e.jsx(ie,{id:"rate-price",type:"number",value:p,onChange:c=>f(c.target.value),placeholder:"120.00"})]})]}),e.jsxs($e,{children:[e.jsx(Be,{asChild:!0,children:e.jsx(b,{variant:"outline",children:"Abbrechen"})}),e.jsxs(b,{onClick:m,children:[e.jsx(Cn,{className:"mr-2 h-4 w-4"}),"Speichern"]})]})]})})},zn=({rates:t,setRates:r})=>{const[n,s]=i.useState(!1),[a,o]=i.useState(null),{toast:l}=Ce(),u=()=>{o(null),s(!0)},p=c=>{o(c),s(!0)},f=c=>{r(h=>(h||[]).filter(x=>x.id!==c)),l({title:"Honorarsatz gelöscht!",className:"bg-green-600 text-white"})},m=c=>{const x=(t||[]).findIndex(v=>v.id===c.id);x>-1?r(v=>{const j=[...v||[]];return j[x]=c,j}):r(v=>[...v||[],c]),s(!1),l({title:"Honorarsatz gespeichert!",className:"bg-green-600 text-white"})};return e.jsxs(e.Fragment,{children:[e.jsx(Kn,{open:n,onOpenChange:s,onSave:m,rate:a}),e.jsxs($,{className:"glass-card",children:[e.jsxs(Ve,{children:[e.jsx(He,{children:"Honorarsätze"}),e.jsx(Ye,{children:"Verwalte deine Standard-Dienstleistungen und deren Preise für eine schnellere Rechnungsstellung."})]}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[(t||[]).map(c=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-800/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:c.name}),e.jsx("p",{className:"text-sm text-slate-400",children:c.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-lg font-bold text-primary",children:["€",c.price.toFixed(2)]}),e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>p(c),children:e.jsx(Me,{className:"h-4 w-4"})}),e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>f(c.id),children:e.jsx(Je,{className:"h-4 w-4 text-red-500"})})]})]},c.id)),e.jsxs(b,{onClick:u,className:"mt-4 w-full",children:[e.jsx(X,{className:"mr-2 h-4 w-4"})," Neuen Honorarsatz hinzufügen"]})]})})]})]})},Un=({invoices:t,onNewInvoice:r,onEditInvoice:n,setInvoices:s,settings:a,coachees:o})=>{const[l,u]=i.useState("all"),{toast:p}=Ce(),f=(d,N)=>{s(y=>y.map(C=>C.id===d?{...C,status:N}:C)),p({title:"Status aktualisiert!",description:`Rechnung wurde als "${h(N)}" markiert.`})},m=i.useMemo(()=>l==="all"?t.sort((d,N)=>N.invoiceNumber.localeCompare(d.invoiceNumber)):l==="open"?t.filter(d=>d.status===D.SENT||d.status===D.OVERDUE):t.filter(d=>d.status===l),[t,l]),c=d=>{switch(d){case D.PAID:return{text:"Bezahlt",className:"bg-green-500/20 text-green-400 border-green-500/30"};case D.SENT:return{text:"Gesendet",className:"bg-blue-500/20 text-blue-400 border-blue-500/30"};case D.DRAFT:return{text:"Entwurf",className:"bg-slate-500/20 text-slate-400 border-slate-500/30"};case D.OVERDUE:return{text:"Überfällig",className:"bg-red-500/20 text-red-400 border-red-500/30"};default:return{text:"Unbekannt",className:"bg-slate-500/20 text-slate-400 border-slate-500/30"}}},h=d=>c(d).text,x=d=>{const N=t.find(C=>C.id===d);if(!N)return;const y=o.find(C=>C.id===N.coacheeId);Mn(N,y,a.company)},v=d=>({EUR:"€",USD:"$",CHF:"CHF"})[d]||d,j=i.useMemo(()=>{const d=t.filter(S=>S.status===D.SENT||S.status===D.OVERDUE),N=t.filter(S=>S.status===D.OVERDUE),y=t.filter(S=>{if(S.status!==D.PAID)return!1;const P=S.paidDate?new Date(S.paidDate):new Date,H=new Date;return H.setDate(H.getDate()-30),P>=H}),C=d.reduce((S,P)=>S+P.total,0),fe=y.reduce((S,P)=>S+P.total,0);return{openSum:C,overdueCount:N.length,paidSum:fe}},[t]),M=[{title:"Offene Rechnungen",value:`${j.openSum.toLocaleString("de-DE",{style:"currency",currency:"EUR"})}`,icon:Sn,color:"text-blue-400"},{title:"Überfällige Rechnungen",value:j.overdueCount,icon:Rn,color:"text-red-400"},{title:"Bezahlt (letzte 30 Tage)",value:`${j.paidSum.toLocaleString("de-DE",{style:"currency",currency:"EUR"})}`,icon:_n,color:"text-green-400"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Rechnungen"}),e.jsx("p",{className:"text-muted-foreground",children:"Verwalte deine Abrechnungen und Honorare"})]}),e.jsxs(b,{onClick:r,children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Neue Rechnung"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:M.map((d,N)=>e.jsx($,{className:"glass-card",children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400 mb-1",children:d.title}),e.jsx("p",{className:"text-2xl font-bold text-white",children:d.value})]}),e.jsx("div",{className:"p-3 bg-primary/20 rounded-lg",children:e.jsx(d.icon,{className:`h-6 w-6 ${d.color}`})})]})})},N))}),e.jsx($,{className:"glass-card",children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(b,{variant:l==="all"?"default":"outline",size:"sm",onClick:()=>u("all"),children:"Alle"}),e.jsx(b,{variant:l==="open"?"default":"outline",size:"sm",onClick:()=>u("open"),children:"Offen"}),e.jsx(b,{variant:l==="paid"?"default":"outline",size:"sm",onClick:()=>u("paid"),children:"Bezahlt"}),e.jsx(b,{variant:l==="draft"?"default":"outline",size:"sm",onClick:()=>u("draft"),children:"Entwürfe"})]})})}),e.jsx("div",{className:"space-y-4",children:m.map((d,N)=>e.jsx(nn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:N*.1},children:e.jsx($,{className:"glass-card hover:bg-slate-800/50 transition-colors",children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/20 text-primary rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ke,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-foreground text-lg",children:d.invoiceNumber}),e.jsx(et,{className:c(d.status).className,children:c(d.status).text})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-2",children:[e.jsx(nt,{className:"mr-2 h-4 w-4"}),d.coacheeName]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-2",children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Erstellt: ",new Date(d.date).toLocaleDateString("de-DE")," • Fällig: ",new Date(d.dueDate).toLocaleDateString("de-DE")]}),e.jsx("p",{className:"text-sm text-slate-300",children:d.description})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between lg:flex-col lg:items-end gap-4 mt-4 lg:mt-0",children:[e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[v(d.currency),d.total.toFixed(2)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(re,{value:d.status,onValueChange:y=>f(d.id,y),children:[e.jsx(se,{className:"w-[140px] h-9",children:e.jsx(ae,{placeholder:"Status ändern"})}),e.jsxs(oe,{children:[e.jsx(E,{value:D.DRAFT,children:"Entwurf"}),e.jsx(E,{value:D.SENT,children:"Gesendet"}),e.jsx(E,{value:D.PAID,children:"Bezahlt"}),e.jsx(E,{value:D.OVERDUE,children:"Überfällig"})]})]}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>n(d.id),children:e.jsx(Me,{className:"h-4 w-4"})}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>x(d.id),children:e.jsx(In,{className:"h-4 w-4"})})]})]})]})})})},d.id))}),m.length===0&&e.jsx($,{className:"glass-card",children:e.jsxs(B,{className:"p-12 text-center",children:[e.jsx(ke,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Keine Rechnungen gefunden"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:l!=="all"?"Keine Rechnungen mit diesem Status vorhanden.":"Erstelle deine erste Rechnung, um zu beginnen."}),l==="all"&&e.jsxs(b,{onClick:r,children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Erste Rechnung erstellen"]})]})})]})};var be=["Enter"," "],$n=["ArrowDown","PageUp","Home"],st=["ArrowUp","PageDown","End"],Bn=[...$n,...st],Vn={ltr:[...be,"ArrowRight"],rtl:[...be,"ArrowLeft"]},Hn={ltr:["ArrowLeft"],rtl:["ArrowRight"]},J="Menu",[W,Yn,qn]=rn(J),[G,at]=Xe(J,[qn,rt,Ze]),me=rt(),ot=Ze(),[Xn,K]=G(J),[Wn,ee]=G(J),ct=t=>{const{__scopeMenu:r,open:n=!1,children:s,dir:a,onOpenChange:o,modal:l=!0}=t,u=me(r),[p,f]=i.useState(null),m=i.useRef(!1),c=We(o),h=En(a);return i.useEffect(()=>{const x=()=>{m.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>m.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),e.jsx(Pn,{...u,children:e.jsx(Xn,{scope:r,open:n,onOpenChange:c,content:p,onContentChange:f,children:e.jsx(Wn,{scope:r,onClose:i.useCallback(()=>c(!1),[c]),isUsingKeyboardRef:m,dir:h,modal:l,children:s})})})};ct.displayName=J;var Qn="MenuAnchor",Se=i.forwardRef((t,r)=>{const{__scopeMenu:n,...s}=t,a=me(n);return e.jsx(An,{...a,...s,ref:r})});Se.displayName=Qn;var Re="MenuPortal",[Zn,it]=G(Re,{forceMount:void 0}),lt=t=>{const{__scopeMenu:r,forceMount:n,children:s,container:a}=t,o=K(Re,r);return e.jsx(Zn,{scope:r,forceMount:n,children:e.jsx(ue,{present:n||o.open,children:e.jsx(sn,{asChild:!0,container:a,children:s})})})};lt.displayName=Re;var I="MenuContent",[Jn,ye]=G(I),dt=i.forwardRef((t,r)=>{const n=it(I,t.__scopeMenu),{forceMount:s=n.forceMount,...a}=t,o=K(I,t.__scopeMenu),l=ee(I,t.__scopeMenu);return e.jsx(W.Provider,{scope:t.__scopeMenu,children:e.jsx(ue,{present:s||o.open,children:e.jsx(W.Slot,{scope:t.__scopeMenu,children:l.modal?e.jsx(er,{...a,ref:r}):e.jsx(tr,{...a,ref:r})})})})}),er=i.forwardRef((t,r)=>{const n=K(I,t.__scopeMenu),s=i.useRef(null),a=Z(r,s);return i.useEffect(()=>{const o=s.current;if(o)return an(o)},[]),e.jsx(De,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:w(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),tr=i.forwardRef((t,r)=>{const n=K(I,t.__scopeMenu);return e.jsx(De,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),nr=dn("MenuContent.ScrollLock"),De=i.forwardRef((t,r)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:p,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:c,onInteractOutside:h,onDismiss:x,disableOutsideScroll:v,...j}=t,M=K(I,n),d=ee(I,n),N=me(n),y=ot(n),C=Yn(n),[fe,S]=i.useState(null),P=i.useRef(null),H=Z(r,P,M.onContentChange),te=i.useRef(0),ne=i.useRef(""),Zt=i.useRef(0),xe=i.useRef(null),Pe=i.useRef("right"),ge=i.useRef(0),Jt=v?ln:i.Fragment,en=v?{as:nr,allowPinchZoom:!0}:void 0,tn=g=>{var U,Te;const _=ne.current+g,A=C().filter(T=>!T.disabled),k=document.activeElement,ve=(U=A.find(T=>T.ref.current===k))==null?void 0:U.textValue,je=A.map(T=>T.textValue),Ae=hr(je,_,ve),Y=(Te=A.find(T=>T.textValue===Ae))==null?void 0:Te.ref.current;(function T(Oe){ne.current=Oe,window.clearTimeout(te.current),Oe!==""&&(te.current=window.setTimeout(()=>T(""),1e3))})(_),Y&&setTimeout(()=>Y.focus())};i.useEffect(()=>()=>window.clearTimeout(te.current),[]),cn();const z=i.useCallback(g=>{var A,k;return Pe.current===((A=xe.current)==null?void 0:A.side)&&xr(g,(k=xe.current)==null?void 0:k.area)},[]);return e.jsx(Jn,{scope:n,searchRef:ne,onItemEnter:i.useCallback(g=>{z(g)&&g.preventDefault()},[z]),onItemLeave:i.useCallback(g=>{var _;z(g)||((_=P.current)==null||_.focus(),S(null))},[z]),onTriggerLeave:i.useCallback(g=>{z(g)&&g.preventDefault()},[z]),pointerGraceTimerRef:Zt,onPointerGraceIntentChange:i.useCallback(g=>{xe.current=g},[]),children:e.jsx(Jt,{...en,children:e.jsx(un,{asChild:!0,trapped:a,onMountAutoFocus:w(o,g=>{var _;g.preventDefault(),(_=P.current)==null||_.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:e.jsx(mn,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:c,onInteractOutside:h,onDismiss:x,children:e.jsx(jn,{asChild:!0,...y,dir:d.dir,orientation:"vertical",loop:s,currentTabStopId:fe,onCurrentTabStopIdChange:S,onEntryFocus:w(p,g=>{d.isUsingKeyboardRef.current||g.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Tn,{role:"menu","aria-orientation":"vertical","data-state":Rt(M.open),"data-radix-menu-content":"",dir:d.dir,...N,...j,ref:H,style:{outline:"none",...j.style},onKeyDown:w(j.onKeyDown,g=>{const A=g.target.closest("[data-radix-menu-content]")===g.currentTarget,k=g.ctrlKey||g.altKey||g.metaKey,ve=g.key.length===1;A&&(g.key==="Tab"&&g.preventDefault(),!k&&ve&&tn(g.key));const je=P.current;if(g.target!==je||!Bn.includes(g.key))return;g.preventDefault();const Y=C().filter(U=>!U.disabled).map(U=>U.ref.current);st.includes(g.key)&&Y.reverse(),mr(Y)}),onBlur:w(t.onBlur,g=>{g.currentTarget.contains(g.target)||(window.clearTimeout(te.current),ne.current="")}),onPointerMove:w(t.onPointerMove,Q(g=>{const _=g.target,A=ge.current!==g.clientX;if(g.currentTarget.contains(_)&&A){const k=g.clientX>ge.current?"right":"left";Pe.current=k,ge.current=g.clientX}}))})})})})})})});dt.displayName=I;var rr="MenuGroup",_e=i.forwardRef((t,r)=>{const{__scopeMenu:n,...s}=t;return e.jsx(V.div,{role:"group",...s,ref:r})});_e.displayName=rr;var sr="MenuLabel",ut=i.forwardRef((t,r)=>{const{__scopeMenu:n,...s}=t;return e.jsx(V.div,{...s,ref:r})});ut.displayName=sr;var le="MenuItem",Le="menu.itemSelect",pe=i.forwardRef((t,r)=>{const{disabled:n=!1,onSelect:s,...a}=t,o=i.useRef(null),l=ee(le,t.__scopeMenu),u=ye(le,t.__scopeMenu),p=Z(r,o),f=i.useRef(!1),m=()=>{const c=o.current;if(!n&&c){const h=new CustomEvent(Le,{bubbles:!0,cancelable:!0});c.addEventListener(Le,x=>s==null?void 0:s(x),{once:!0}),on(c,h),h.defaultPrevented?f.current=!1:l.onClose()}};return e.jsx(mt,{...a,ref:p,disabled:n,onClick:w(t.onClick,m),onPointerDown:c=>{var h;(h=t.onPointerDown)==null||h.call(t,c),f.current=!0},onPointerUp:w(t.onPointerUp,c=>{var h;f.current||(h=c.currentTarget)==null||h.click()}),onKeyDown:w(t.onKeyDown,c=>{const h=u.searchRef.current!=="";n||h&&c.key===" "||be.includes(c.key)&&(c.currentTarget.click(),c.preventDefault())})})});pe.displayName=le;var mt=i.forwardRef((t,r)=>{const{__scopeMenu:n,disabled:s=!1,textValue:a,...o}=t,l=ye(le,n),u=ot(n),p=i.useRef(null),f=Z(r,p),[m,c]=i.useState(!1),[h,x]=i.useState("");return i.useEffect(()=>{const v=p.current;v&&x((v.textContent??"").trim())},[o.children]),e.jsx(W.ItemSlot,{scope:n,disabled:s,textValue:a??h,children:e.jsx(vn,{asChild:!0,...u,focusable:!s,children:e.jsx(V.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...o,ref:f,onPointerMove:w(t.onPointerMove,Q(v=>{s?l.onItemLeave(v):(l.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:w(t.onPointerLeave,Q(v=>l.onItemLeave(v))),onFocus:w(t.onFocus,()=>c(!0)),onBlur:w(t.onBlur,()=>c(!1))})})})}),ar="MenuCheckboxItem",pt=i.forwardRef((t,r)=>{const{checked:n=!1,onCheckedChange:s,...a}=t;return e.jsx(vt,{scope:t.__scopeMenu,checked:n,children:e.jsx(pe,{role:"menuitemcheckbox","aria-checked":de(n)?"mixed":n,...a,ref:r,"data-state":Ee(n),onSelect:w(a.onSelect,()=>s==null?void 0:s(de(n)?!0:!n),{checkForDefaultPrevented:!1})})})});pt.displayName=ar;var ht="MenuRadioGroup",[or,cr]=G(ht,{value:void 0,onValueChange:()=>{}}),ft=i.forwardRef((t,r)=>{const{value:n,onValueChange:s,...a}=t,o=We(s);return e.jsx(or,{scope:t.__scopeMenu,value:n,onValueChange:o,children:e.jsx(_e,{...a,ref:r})})});ft.displayName=ht;var xt="MenuRadioItem",gt=i.forwardRef((t,r)=>{const{value:n,...s}=t,a=cr(xt,t.__scopeMenu),o=n===a.value;return e.jsx(vt,{scope:t.__scopeMenu,checked:o,children:e.jsx(pe,{role:"menuitemradio","aria-checked":o,...s,ref:r,"data-state":Ee(o),onSelect:w(s.onSelect,()=>{var l;return(l=a.onValueChange)==null?void 0:l.call(a,n)},{checkForDefaultPrevented:!1})})})});gt.displayName=xt;var Ie="MenuItemIndicator",[vt,ir]=G(Ie,{checked:!1}),jt=i.forwardRef((t,r)=>{const{__scopeMenu:n,forceMount:s,...a}=t,o=ir(Ie,n);return e.jsx(ue,{present:s||de(o.checked)||o.checked===!0,children:e.jsx(V.span,{...a,ref:r,"data-state":Ee(o.checked)})})});jt.displayName=Ie;var lr="MenuSeparator",wt=i.forwardRef((t,r)=>{const{__scopeMenu:n,...s}=t;return e.jsx(V.div,{role:"separator","aria-orientation":"horizontal",...s,ref:r})});wt.displayName=lr;var dr="MenuArrow",Nt=i.forwardRef((t,r)=>{const{__scopeMenu:n,...s}=t,a=me(n);return e.jsx(On,{...a,...s,ref:r})});Nt.displayName=dr;var ur="MenuSub",[Ts,bt]=G(ur),q="MenuSubTrigger",Ct=i.forwardRef((t,r)=>{const n=K(q,t.__scopeMenu),s=ee(q,t.__scopeMenu),a=bt(q,t.__scopeMenu),o=ye(q,t.__scopeMenu),l=i.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:p}=o,f={__scopeMenu:t.__scopeMenu},m=i.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return i.useEffect(()=>m,[m]),i.useEffect(()=>{const c=u.current;return()=>{window.clearTimeout(c),p(null)}},[u,p]),e.jsx(Se,{asChild:!0,...f,children:e.jsx(mt,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":Rt(n.open),...t,ref:Qe(r,a.onTriggerChange),onClick:c=>{var h;(h=t.onClick)==null||h.call(t,c),!(t.disabled||c.defaultPrevented)&&(c.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:w(t.onPointerMove,Q(c=>{o.onItemEnter(c),!c.defaultPrevented&&!t.disabled&&!n.open&&!l.current&&(o.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),m()},100))})),onPointerLeave:w(t.onPointerLeave,Q(c=>{var x,v;m();const h=(x=n.content)==null?void 0:x.getBoundingClientRect();if(h){const j=(v=n.content)==null?void 0:v.dataset.side,M=j==="right",d=M?-5:5,N=h[M?"left":"right"],y=h[M?"right":"left"];o.onPointerGraceIntentChange({area:[{x:c.clientX+d,y:c.clientY},{x:N,y:h.top},{x:y,y:h.top},{x:y,y:h.bottom},{x:N,y:h.bottom}],side:j}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(c),c.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:w(t.onKeyDown,c=>{var x;const h=o.searchRef.current!=="";t.disabled||h&&c.key===" "||Vn[s.dir].includes(c.key)&&(n.onOpenChange(!0),(x=n.content)==null||x.focus(),c.preventDefault())})})})});Ct.displayName=q;var Mt="MenuSubContent",St=i.forwardRef((t,r)=>{const n=it(I,t.__scopeMenu),{forceMount:s=n.forceMount,...a}=t,o=K(I,t.__scopeMenu),l=ee(I,t.__scopeMenu),u=bt(Mt,t.__scopeMenu),p=i.useRef(null),f=Z(r,p);return e.jsx(W.Provider,{scope:t.__scopeMenu,children:e.jsx(ue,{present:s||o.open,children:e.jsx(W.Slot,{scope:t.__scopeMenu,children:e.jsx(De,{id:u.contentId,"aria-labelledby":u.triggerId,...a,ref:f,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{var c;l.isUsingKeyboardRef.current&&((c=p.current)==null||c.focus()),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:w(t.onFocusOutside,m=>{m.target!==u.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:w(t.onEscapeKeyDown,m=>{l.onClose(),m.preventDefault()}),onKeyDown:w(t.onKeyDown,m=>{var x;const c=m.currentTarget.contains(m.target),h=Hn[l.dir].includes(m.key);c&&h&&(o.onOpenChange(!1),(x=u.trigger)==null||x.focus(),m.preventDefault())})})})})})});St.displayName=Mt;function Rt(t){return t?"open":"closed"}function de(t){return t==="indeterminate"}function Ee(t){return de(t)?"indeterminate":t?"checked":"unchecked"}function mr(t){const r=document.activeElement;for(const n of t)if(n===r||(n.focus(),document.activeElement!==r))return}function pr(t,r){return t.map((n,s)=>t[(r+s)%t.length])}function hr(t,r,n){const a=r.length>1&&Array.from(r).every(f=>f===r[0])?r[0]:r,o=n?t.indexOf(n):-1;let l=pr(t,Math.max(o,0));a.length===1&&(l=l.filter(f=>f!==n));const p=l.find(f=>f.toLowerCase().startsWith(a.toLowerCase()));return p!==n?p:void 0}function fr(t,r){const{x:n,y:s}=t;let a=!1;for(let o=0,l=r.length-1;o<r.length;l=o++){const u=r[o],p=r[l],f=u.x,m=u.y,c=p.x,h=p.y;m>s!=h>s&&n<(c-f)*(s-m)/(h-m)+f&&(a=!a)}return a}function xr(t,r){if(!r)return!1;const n={x:t.clientX,y:t.clientY};return fr(n,r)}function Q(t){return r=>r.pointerType==="mouse"?t(r):void 0}var gr=ct,vr=Se,jr=lt,wr=dt,Nr=_e,br=ut,Cr=pe,Mr=pt,Sr=ft,Rr=gt,yr=jt,Dr=wt,_r=Nt,Ir=Ct,Er=St,he="DropdownMenu",[Pr,Os]=Xe(he,[at]),R=at(),[Ar,yt]=Pr(he),Dt=t=>{const{__scopeDropdownMenu:r,children:n,dir:s,open:a,defaultOpen:o,onOpenChange:l,modal:u=!0}=t,p=R(r),f=i.useRef(null),[m,c]=pn({prop:a,defaultProp:o??!1,onChange:l,caller:he});return e.jsx(Ar,{scope:r,triggerId:Fe(),triggerRef:f,contentId:Fe(),open:m,onOpenChange:c,onOpenToggle:i.useCallback(()=>c(h=>!h),[c]),modal:u,children:e.jsx(gr,{...p,open:m,onOpenChange:c,dir:s,modal:u,children:n})})};Dt.displayName=he;var _t="DropdownMenuTrigger",It=i.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...a}=t,o=yt(_t,n),l=R(n);return e.jsx(vr,{asChild:!0,...l,children:e.jsx(V.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:Qe(r,o.triggerRef),onPointerDown:w(t.onPointerDown,u=>{!s&&u.button===0&&u.ctrlKey===!1&&(o.onOpenToggle(),o.open||u.preventDefault())}),onKeyDown:w(t.onKeyDown,u=>{s||(["Enter"," "].includes(u.key)&&o.onOpenToggle(),u.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});It.displayName=_t;var Tr="DropdownMenuPortal",Et=t=>{const{__scopeDropdownMenu:r,...n}=t,s=R(r);return e.jsx(jr,{...s,...n})};Et.displayName=Tr;var Pt="DropdownMenuContent",At=i.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=yt(Pt,n),o=R(n),l=i.useRef(!1);return e.jsx(wr,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...s,ref:r,onCloseAutoFocus:w(t.onCloseAutoFocus,u=>{var p;l.current||(p=a.triggerRef.current)==null||p.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:w(t.onInteractOutside,u=>{const p=u.detail.originalEvent,f=p.button===0&&p.ctrlKey===!0,m=p.button===2||f;(!a.modal||m)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});At.displayName=Pt;var Or="DropdownMenuGroup",kr=i.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=R(n);return e.jsx(Nr,{...a,...s,ref:r})});kr.displayName=Or;var Fr="DropdownMenuLabel",Tt=i.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=R(n);return e.jsx(br,{...a,...s,ref:r})});Tt.displayName=Fr;var Lr="DropdownMenuItem",Ot=i.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=R(n);return e.jsx(Cr,{...a,...s,ref:r})});Ot.displayName=Lr;var Gr="DropdownMenuCheckboxItem",kt=i.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=R(n);return e.jsx(Mr,{...a,...s,ref:r})});kt.displayName=Gr;var Kr="DropdownMenuRadioGroup",zr=i.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=R(n);return e.jsx(Sr,{...a,...s,ref:r})});zr.displayName=Kr;var Ur="DropdownMenuRadioItem",Ft=i.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=R(n);return e.jsx(Rr,{...a,...s,ref:r})});Ft.displayName=Ur;var $r="DropdownMenuItemIndicator",Lt=i.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=R(n);return e.jsx(yr,{...a,...s,ref:r})});Lt.displayName=$r;var Br="DropdownMenuSeparator",Gt=i.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=R(n);return e.jsx(Dr,{...a,...s,ref:r})});Gt.displayName=Br;var Vr="DropdownMenuArrow",Hr=i.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=R(n);return e.jsx(_r,{...a,...s,ref:r})});Hr.displayName=Vr;var Yr="DropdownMenuSubTrigger",Kt=i.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=R(n);return e.jsx(Ir,{...a,...s,ref:r})});Kt.displayName=Yr;var qr="DropdownMenuSubContent",zt=i.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=R(n);return e.jsx(Er,{...a,...s,ref:r,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zt.displayName=qr;var Xr=Dt,Wr=It,Qr=Et,Ut=At,$t=Tt,Bt=Ot,Vt=kt,Ht=Ft,Yt=Lt,qt=Gt,Xt=Kt,Wt=zt;const Zr=Xr,Jr=Wr,es=O.forwardRef(({className:t,inset:r,children:n,...s},a)=>e.jsxs(Xt,{ref:a,className:L("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",t),...s,children:[n,e.jsx(kn,{className:"ml-auto h-4 w-4"})]}));es.displayName=Xt.displayName;const ts=O.forwardRef(({className:t,...r},n)=>e.jsx(Wt,{ref:n,className:L("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));ts.displayName=Wt.displayName;const Qt=O.forwardRef(({className:t,sideOffset:r=4,...n},s)=>e.jsx(Qr,{children:e.jsx(Ut,{ref:s,sideOffset:r,className:L("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Qt.displayName=Ut.displayName;const ce=O.forwardRef(({className:t,inset:r,...n},s)=>e.jsx(Bt,{ref:s,className:L("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",t),...n}));ce.displayName=Bt.displayName;const ns=O.forwardRef(({className:t,children:r,checked:n,...s},a)=>e.jsxs(Vt,{ref:a,className:L("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Yt,{children:e.jsx(Fn,{className:"h-4 w-4"})})}),r]}));ns.displayName=Vt.displayName;const rs=O.forwardRef(({className:t,children:r,...n},s)=>e.jsxs(Ht,{ref:s,className:L("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Yt,{children:e.jsx(Ln,{className:"h-2 w-2 fill-current"})})}),r]}));rs.displayName=Ht.displayName;const ss=O.forwardRef(({className:t,inset:r,...n},s)=>e.jsx($t,{ref:s,className:L("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...n}));ss.displayName=$t.displayName;const as=O.forwardRef(({className:t,...r},n)=>e.jsx(qt,{ref:n,className:L("-mx-1 my-1 h-px bg-muted",t),...r}));as.displayName=qt.displayName;const os=({open:t,onOpenChange:r,onSave:n,coachees:s,serviceRates:a,recurringInvoice:o})=>{const[l,u]=i.useState(""),[p,f]=i.useState(""),[m,c]=i.useState(1),[h,x]=i.useState("monthly"),[v,j]=i.useState(new Date().toISOString().split("T")[0]);O.useEffect(()=>{o?(u(o.coacheeId.toString()),f(o.rateId.toString()),c(o.quantity),x(o.interval),j(o.startDate)):(u("placeholder"),f("placeholder"),c(1),x("monthly"),j(new Date().toISOString().split("T")[0]))},[o,t]);const M=()=>{const d=s.find(C=>C.id===parseInt(l)),N=a.find(C=>C.id===parseInt(p));if(!d||!N||l==="placeholder"||p==="placeholder")return;const y={id:o?o.id:Date.now(),coacheeId:parseInt(l),coacheeName:`${d.firstName} ${d.lastName}`,rateId:parseInt(p),quantity:m,interval:h,startDate:v,status:o?o.status:"active",nextDueDate:v};n(y)};return e.jsx(Ge,{open:t,onOpenChange:r,children:e.jsxs(Ke,{className:"glass-card",children:[e.jsxs(ze,{children:[e.jsx(Ue,{children:o?"Abonnement bearbeiten":"Neues Abonnement erstellen"}),e.jsx(hn,{children:"Richte wiederkehrende Rechnungen für deine Coachees ein."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(F,{htmlFor:"coachee",children:"Coachee"}),e.jsxs(re,{value:l,onValueChange:u,children:[e.jsx(se,{children:e.jsx(ae,{placeholder:"Coachee wählen..."})}),e.jsxs(oe,{children:[e.jsx(E,{value:"placeholder",disabled:!0,children:"Bitte wählen..."}),s.map(d=>e.jsxs(E,{value:d.id.toString(),children:[d.firstName," ",d.lastName]},d.id))]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(F,{htmlFor:"rate",children:"Honorarsatz"}),e.jsxs(re,{value:p,onValueChange:f,children:[e.jsx(se,{children:e.jsx(ae,{placeholder:"Satz wählen..."})}),e.jsxs(oe,{children:[e.jsx(E,{value:"placeholder",disabled:!0,children:"Bitte wählen..."}),a.map(d=>e.jsxs(E,{value:d.id.toString(),children:[d.name," (€",d.price.toFixed(2),")"]},d.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(F,{htmlFor:"quantity",children:"Anzahl"}),e.jsx(ie,{id:"quantity",type:"number",value:m,onChange:d=>c(parseInt(d.target.value)||1),min:"1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(F,{htmlFor:"interval",children:"Intervall"}),e.jsxs(re,{value:h,onValueChange:x,children:[e.jsx(se,{children:e.jsx(ae,{})}),e.jsxs(oe,{children:[e.jsx(E,{value:"monthly",children:"Monatlich"}),e.jsx(E,{value:"quarterly",children:"Quartalsweise"}),e.jsx(E,{value:"yearly",children:"Jährlich"})]})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(F,{htmlFor:"start-date",children:"Startdatum"}),e.jsx(ie,{id:"start-date",type:"date",value:v,onChange:d=>j(d.target.value)})]})]}),e.jsxs($e,{children:[e.jsx(Be,{asChild:!0,children:e.jsx(b,{variant:"outline",children:"Abbrechen"})}),e.jsx(b,{onClick:M,children:"Speichern"})]})]})})},cs=({item:t,serviceRates:r,onUpdate:n,onDelete:s})=>{const a=r.find(l=>l.id===t.rateId),o=l=>{switch(l){case"active":return"bg-green-500/80";case"paused":return"bg-yellow-500/80";default:return"secondary"}};return e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(tt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-white",children:[a==null?void 0:a.name," (",t.quantity,"x)"]}),e.jsxs("p",{className:"text-sm text-slate-400 flex items-center gap-2",children:[e.jsx(nt,{className:"h-4 w-4"}),t.coacheeName]}),e.jsxs("p",{className:"text-sm text-slate-400 flex items-center gap-2",children:[e.jsx(qe,{className:"h-4 w-4"}),"Nächste Rechnung am: ",new Date(t.nextDueDate).toLocaleDateString("de-DE")]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(et,{variant:"default",className:o(t.status),children:t.status==="active"?"Aktiv":"Pausiert"}),e.jsxs("p",{className:"text-lg font-bold text-primary",children:["€",(((a==null?void 0:a.price)||0)*t.quantity).toFixed(2)]}),e.jsxs(Zr,{children:[e.jsx(Jr,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",children:e.jsx(yn,{className:"h-4 w-4"})})}),e.jsxs(Qt,{children:[e.jsxs(ce,{onSelect:()=>n(t,"status",t.status==="active"?"paused":"active"),children:[t.status==="active"?e.jsx(Dn,{className:"mr-2 h-4 w-4"}):e.jsx(Gn,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:t.status==="active"?"Pausieren":"Aktivieren"})]}),e.jsxs(ce,{onSelect:()=>n(t,"edit"),children:[e.jsx(Me,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Bearbeiten"})]}),e.jsxs(ce,{onSelect:()=>s(t.id),className:"text-red-500",children:[e.jsx(Je,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Löschen"})]})]})]})]})]})};function is({recurringInvoices:t,setRecurringInvoices:r,coachees:n,serviceRates:s}){const[a,o]=i.useState(!1),[l,u]=i.useState(null),{toast:p}=Ce(),f=x=>{(t||[]).findIndex(j=>j.id===x.id)>-1?(r(j=>j.map(M=>M.id===x.id?x:M)),p({title:"Abonnement aktualisiert!",className:"bg-green-600 text-white"})):(r(j=>[...j||[],x]),p({title:"Abonnement erstellt!",className:"bg-green-600 text-white"})),o(!1),u(null)},m=(x,v,j)=>{if(v==="edit")u(x),o(!0);else{const M={...x,[v]:j};f(M)}},c=x=>{r(v=>(v||[]).filter(j=>j.id!==x)),p({title:"Abonnement gelöscht!",variant:"destructive"})},h=()=>{u(null),o(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(os,{open:a,onOpenChange:o,onSave:f,coachees:n,serviceRates:s,recurringInvoice:l}),e.jsxs($,{className:"glass-card",children:[e.jsx(Ve,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(He,{children:"Abonnements & Wiederkehrende Rechnungen"}),e.jsx(Ye,{children:"Verwalte deine wiederkehrenden Einnahmen und Abo-Modelle."})]}),e.jsxs(b,{onClick:h,children:[e.jsx(X,{className:"mr-2 h-4 w-4"})," Neues Abo"]})]})}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[(t||[]).map(x=>e.jsx(cs,{item:x,serviceRates:s,onUpdate:m,onDelete:c},x.id)),(t||[]).length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tt,{className:"mx-auto h-12 w-12 text-slate-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Keine Abonnements gefunden"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"Erstelle dein erstes Abonnement, um loszulegen."}),e.jsxs(b,{onClick:h,children:[e.jsx(X,{className:"mr-2 h-4 w-4"})," Erstes Abo erstellen"]})]})]})})]})]})}function ks(){const{state:t,actions:r}=fn(),{invoices:n,serviceRates:s,recurringInvoices:a,coachees:o,settings:l}=t,{setInvoices:u,setServiceRates:p,setRecurringInvoices:f}=r,m=xn();return e.jsxs(e.Fragment,{children:[e.jsxs(gn,{children:[e.jsx("title",{children:"Rechnungen - Coachingspace"}),e.jsx("meta",{name:"description",content:"Verwalte deine Coaching-Rechnungen, behalte den Überblick über Zahlungen und erstelle neue Abrechnungen."})]}),e.jsxs(wn,{defaultValue:"invoices",className:"space-y-4",children:[e.jsxs(Nn,{children:[e.jsx(we,{value:"invoices",children:"Rechnungen"}),e.jsx(we,{value:"recurring",children:"Abonnements"}),e.jsx(we,{value:"rates",children:"Honorarsätze"})]}),e.jsx(Ne,{value:"invoices",children:e.jsx(Un,{invoices:n,setInvoices:u,onNewInvoice:()=>m("/invoices/new"),onEditInvoice:c=>m(`/invoices/edit/${c}`),settings:l,coachees:o})}),e.jsx(Ne,{value:"recurring",children:e.jsx(is,{recurringInvoices:a||[],setRecurringInvoices:f,coachees:o||[],serviceRates:s||[]})}),e.jsx(Ne,{value:"rates",children:e.jsx(zn,{rates:s,setRates:p})})]})]})}export{ks as default};
