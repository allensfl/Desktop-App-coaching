import{F as J,af as de,U as he,T as R,j as e,m as xe,e as I,B as h,f as me,g as ue,h as $,A as ge,D as z,n as U,o as L,p as M,q as pe,s as H,v as je,i as V,r as l,t as _,k as Q,d as fe,H as ve,a6 as Ne,S as Ce,ab as be}from"./index-BCVF1PLb.js";import{I as E}from"./input-CMYn3E83.js";import{B as D}from"./badge-EtFkFwpi.js";import{T as we,a as Te,b as ye,c as Se}from"./tooltip-Cd-qNS3R.js";import{U as W}from"./upload-DSGQNpdk.js";import{S as ke,G as Fe,L as Ae,a as q,C as De,P as ze}from"./star-C8T6tN-e.js";import{C as Ue}from"./clock-BzT5nvLL.js";import{Z as Le}from"./zap-BfdS1JCM.js";import{A as Me,a as He,b as Ee,c as Ke,d as Be,e as Pe,f as Ie,g as $e,h as Oe}from"./alert-dialog-C4_CwsSl.js";import{T as X}from"./trash-2-Doau15tD.js";import{A as Re}from"./archive-GCBZU5bP.js";import{f as Ve,d as _e}from"./de-B2K29ify.js";import{L as S}from"./label-gCXM_mwv.js";import{T as O}from"./textarea-Ei5qcXJt.js";import{S as Y,a as ee,b as se,c as te,d as ae}from"./select-B5ckg96L.js";import{u as qe}from"./index-Btm19AAi.js";import"./index-D9lbRThE.js";import"./floating-ui.react-dom-DMRTrF13.js";import"./index-B8MATRhp.js";import"./check-C26bXOMj.js";const Ze={Target:R,Compass:De,Zap:Le,Users:he,Clock:Ue,Star:q,List:Ae,GitBranch:Fe,SlidersHorizontal:ke,CheckSquare:de,FileText:J,Upload:W},Ge=({tool:s,onCardClick:j,onToggleFavorite:p})=>{const m=Ze[s.icon]||R;return e.jsx(xe.div,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3},className:"cursor-pointer",onClick:()=>j(s),children:e.jsxs(I,{className:"glass-card hover:bg-slate-800/50 transition-all duration-300 group h-full flex flex-col relative",children:[e.jsx(we,{children:e.jsxs(Te,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 h-8 w-8 z-10",onClick:t=>{t.stopPropagation(),p(s.id)},children:e.jsx(q,{className:`h-5 w-5 transition-colors ${s.isFavorite?"text-yellow-400 fill-yellow-400":"text-slate-400 hover:text-yellow-400"}`})})}),e.jsx(Se,{children:e.jsx("p",{children:s.isFavorite?"Favorit entfernen":"Als Favorit markieren"})})]})}),e.jsxs(me,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:e.jsx(m,{className:"h-6 w-6 text-white"})}),e.jsx(D,{variant:s.status==="active"?"default":"secondary",className:s.status==="active"?"bg-green-600/20 text-green-400 border-green-500/30":"",children:s.status==="active"?"Aktiv":"Archiviert"})]}),e.jsx(ue,{className:"text-white group-hover:text-blue-400 transition-colors pr-10",children:s.name})]}),e.jsxs($,{className:"flex-1 flex flex-col",children:[e.jsx("p",{className:"text-slate-400 text-sm mb-4 flex-1 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{variant:"outline",className:"text-xs w-fit",children:s.category}),s.type==="file"&&e.jsx(D,{variant:"secondary",className:"text-xs w-fit",children:"Datei"}),s.isCustom&&e.jsx(D,{variant:"secondary",className:"text-xs w-fit bg-purple-600/20 text-purple-400 border-purple-500/30",children:"Eigenes"})]})]})]})})},Je=({tool:s,open:j,onOpenChange:p,onEdit:m,onDelete:t,onArchive:N})=>{const r=ge();if(!s)return null;const u=()=>{if(s.type==="file"){window.open(s.fileUrl,"_blank");return}p(!1),r(`/tool-presenter/${s.id}`)};return e.jsx(z,{open:j,onOpenChange:p,children:e.jsxs(U,{className:"sm:max-w-2xl glass-card",children:[e.jsxs(L,{children:[e.jsx(M,{className:"text-2xl text-white",children:s.name}),e.jsx(pe,{children:s.category})]}),e.jsxs("div",{className:"py-4 space-y-4 max-h-[60vh] overflow-y-auto pr-4",children:[e.jsx("p",{className:"text-slate-300",children:s.description}),s.type==="text"&&s.content&&e.jsx("div",{className:"prose prose-invert prose-sm max-w-none bg-slate-800/50 p-4 rounded-lg",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:s.content}})}),s.type==="file"&&e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg",children:e.jsx("p",{className:"text-slate-300",children:'Dies ist ein dateibasiertes Tool. Klicken Sie auf "Öffnen", um die Datei anzuzeigen.'})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-200 mb-2",children:"Verwendungshistorie"}),s.usageHistory&&s.usageHistory.length>0?e.jsx("ul",{className:"list-disc list-inside text-slate-400 text-sm",children:s.usageHistory.map((g,x)=>e.jsxs("li",{children:["Session mit ",g.coacheeName," am ",Ve(new Date(g.date),"dd.MM.yyyy",{locale:_e})]},x))}):e.jsx("p",{className:"text-slate-500 text-sm italic",children:"Noch nicht verwendet."})]})]}),e.jsxs(H,{className:"flex-wrap justify-between sm:justify-between",children:[e.jsx("div",{className:"flex gap-2",children:s.isCustom&&e.jsxs(e.Fragment,{children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>m(s),children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Bearbeiten"]}),e.jsxs(Me,{children:[e.jsx(He,{asChild:!0,children:e.jsxs(h,{variant:"destructive",size:"sm",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Löschen"]})}),e.jsxs(Ee,{children:[e.jsxs(Ke,{children:[e.jsx(Be,{children:"Tool wirklich löschen?"}),e.jsxs(Pe,{children:['Diese Aktion kann nicht rückgängig gemacht werden. Das Tool "',s.name,'" wird dauerhaft gelöscht.']})]}),e.jsxs(Ie,{children:[e.jsx($e,{children:"Abbrechen"}),e.jsx(Oe,{onClick:()=>t(s.id),className:"bg-red-600 hover:bg-red-700",children:"Löschen"})]})]})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{variant:"outline",onClick:()=>N(s.id),children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),s.status==="active"?"Archivieren":"Aktivieren"]}),e.jsxs(h,{onClick:u,className:"bg-blue-600 hover:bg-blue-700",children:[s.type==="file"?e.jsx(J,{className:"h-4 w-4 mr-2"}):e.jsx(ze,{className:"h-4 w-4 mr-2"}),s.type==="file"?"Datei öffnen":"Präsentieren"]})]})]})]})})},Qe=({open:s,onOpenChange:j,onSave:p,categories:m,initialData:t})=>{const{toast:N}=V(),[r,u]=l.useState(""),[g,x]=l.useState(""),[d,n]=l.useState(""),[w,f]=l.useState(""),i=!!t;l.useEffect(()=>{t?(u(t.name),x(t.description),n(t.category),f(t.content||"")):(u(""),x(""),n(m[0]||"Sonstige"),f(""))},[t,m,s]);const y=()=>{if(!r||!g){N({title:"Fehler",description:"Bitte Name und Beschreibung ausfüllen.",variant:"destructive"});return}const o={id:i?t.id:Date.now(),name:r,category:d,description:g,icon:i?t.icon:"FileText",usage:"Benutzerdefiniertes Tool",status:i?t.status:"active",usageHistory:i?t.usageHistory:[],content:w,type:"text",isCustom:!0,isFavorite:i?t.isFavorite:!1};p(o),j(!1)};return e.jsx(z,{open:s,onOpenChange:j,children:e.jsxs(U,{className:"sm:max-w-2xl glass-card",children:[e.jsx(L,{children:e.jsx(M,{className:"text-2xl text-white",children:i?"Text-Tool bearbeiten":"Neues Text-Tool erstellen"})}),e.jsxs("div",{className:"py-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"tool-name",children:"Tool-Name"}),e.jsx(E,{id:"tool-name",value:r,onChange:o=>u(o.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"tool-category",children:"Kategorie"}),e.jsxs(Y,{value:d,onValueChange:n,children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"Kategorie wählen..."})}),e.jsx(te,{children:m.map(o=>e.jsx(ae,{value:o,children:o},o))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"tool-description",children:"Beschreibung"}),e.jsx(O,{id:"tool-description",value:g,onChange:o=>x(o.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"tool-content",children:"Inhalt (Markdown unterstützt)"}),e.jsx(O,{id:"tool-content",value:w,onChange:o=>f(o.target.value),className:"min-h-[200px] font-mono"})]})]}),e.jsxs(H,{children:[e.jsx(_,{asChild:!0,children:e.jsx(h,{variant:"outline",children:"Abbrechen"})}),e.jsx(h,{onClick:y,children:i?"Änderungen speichern":"Tool speichern"})]})]})})},We=({open:s,onOpenChange:j,onSave:p,categories:m,initialData:t})=>{const{toast:N}=V(),[r,u]=l.useState(null),[g,x]=l.useState(""),[d,n]=l.useState(""),[w,f]=l.useState(""),i=!!t,[y,o]=l.useState(null);l.useEffect(()=>{t?(x(t.name),n(t.description),f(t.category),o(t.fileUrl),u(null)):(x(""),n(""),f(m.find(c=>c==="Checklisten")||m[0]||"Sonstige"),o(null),u(null))},[t,m,s]);const K=l.useCallback(c=>{c.length>0&&(u(c[0]),g||x(c[0].name.split(".").slice(0,-1).join(".")))},[g]),{getRootProps:F,getInputProps:B,isDragActive:A}=qe({onDrop:K,maxFiles:1}),P=()=>{if(!r&&!i||!g||!d){N({title:"Fehler",description:"Bitte alle Felder ausfüllen und eine Datei auswählen.",variant:"destructive"});return}let c=y;r&&(y&&URL.revokeObjectURL(y),c=URL.createObjectURL(r));const C={id:i?t.id:Date.now(),name:g,category:w,description:d,icon:i?t.icon:"Upload",usage:"Dateibasiertes Tool",status:i?t.status:"active",usageHistory:i?t.usageHistory:[],type:"file",fileUrl:c,fileName:r?r.name:i?t.fileName:"",isCustom:!0,isFavorite:i?t.isFavorite:!1};p(C),j(!1)};return e.jsx(z,{open:s,onOpenChange:j,children:e.jsxs(U,{className:"sm:max-w-2xl glass-card",children:[e.jsx(L,{children:e.jsx(M,{className:"text-2xl text-white",children:i?"Datei-Tool bearbeiten":"Datei-Tool hochladen"})}),e.jsxs("div",{className:"py-4 space-y-4",children:[e.jsxs("div",{...F(),className:`p-6 border-2 border-dashed rounded-lg text-center cursor-pointer transition-colors ${A?"border-primary bg-primary/10":"border-slate-700 hover:border-primary"}`,children:[e.jsx("input",{...B()}),r?e.jsxs("p",{children:["Neue Datei: ",r.name]}):i&&t.fileName?e.jsxs("p",{children:["Aktuelle Datei: ",t.fileName,". Ziehe eine neue Datei hierher, um sie zu ersetzen."]}):e.jsx("p",{children:"Datei hierher ziehen oder klicken."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"upload-tool-name",children:"Tool-Name"}),e.jsx(E,{id:"upload-tool-name",value:g,onChange:c=>x(c.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"upload-tool-category",children:"Kategorie"}),e.jsxs(Y,{value:w,onValueChange:f,children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"Kategorie wählen..."})}),e.jsx(te,{children:m.map(c=>e.jsx(ae,{value:c,children:c},c))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"upload-tool-description",children:"Beschreibung"}),e.jsx(O,{id:"upload-tool-description",value:d,onChange:c=>n(c.target.value)})]})]}),e.jsxs(H,{children:[e.jsx(_,{asChild:!0,children:e.jsx(h,{variant:"outline",children:"Abbrechen"})}),e.jsx(h,{onClick:P,children:i?"Änderungen speichern":"Tool hochladen"})]})]})})},Xe=({open:s,onOpenChange:j,categories:p,updateCategories:m})=>{const[t,N]=l.useState(p);l.useEffect(()=>{s&&N(p)},[s,p]);const r=(d,n)=>{N(w=>w.map((f,i)=>i===d?n:f))},u=()=>{N(d=>[...d,"Neue Kategorie"])},g=d=>{N(n=>n.filter((w,f)=>f!==d))},x=()=>{m(t.filter(d=>d.trim()!=="")),j(!1)};return e.jsx(z,{open:s,onOpenChange:j,children:e.jsxs(U,{className:"sm:max-w-[500px] glass-card",children:[e.jsx(L,{children:e.jsx(M,{children:"Toolbox-Kategorien verwalten"})}),e.jsxs("div",{className:"space-y-4 py-4 max-h-[60vh] overflow-y-auto pr-4",children:[t.map((d,n)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{value:d,onChange:w=>r(n,w.target.value),className:"flex-grow"}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>g(n),children:e.jsx(X,{className:"h-4 w-4 text-red-500"})})]},n)),e.jsxs(h,{variant:"outline",onClick:u,className:"w-full mt-4",children:[e.jsx(Q,{className:"mr-2 h-4 w-4"})," Neue Kategorie"]})]}),e.jsxs(H,{children:[e.jsx(_,{asChild:!0,children:e.jsx(h,{variant:"outline",children:"Abbrechen"})}),e.jsx(h,{onClick:x,children:"Speichern"})]})]})})};function vs(){const{state:s,actions:j}=fe(),{tools:p,settings:m}=s,{setTools:t,updateToolCategories:N}=j,{toolCategories:r}=m,[u,g]=l.useState(""),[x,d]=l.useState("all"),[n,w]=l.useState(!1),[f,i]=l.useState(null),[y,o]=l.useState(null),[K,F]=l.useState(!1),[B,A]=l.useState(!1),[P,c]=l.useState(!1),{toast:C}=V(),le=l.useMemo(()=>["all",...r],[r]),Z=l.useCallback(a=>{t(b=>b.find(v=>v.id===a.id)?(C({title:"Tool aktualisiert",description:`${a.name} wurde erfolgreich bearbeitet.`,className:"bg-green-600 text-white"}),b.map(v=>v.id===a.id?a:v)):(C({title:"Tool gespeichert",description:`${a.name} wurde zur Toolbox hinzugefügt.`,className:"bg-green-600 text-white"}),[...b,a])),o(null)},[t,C]),ie=a=>{i(null),o(a),a.type==="text"&&F(!0),a.type==="file"&&A(!0)},re=l.useCallback(a=>{t(b=>b.filter(T=>T.id!==a)),C({title:"Tool gelöscht",description:"Das Tool wurde erfolgreich entfernt.",variant:"destructive"}),i(null)},[t,C]),ne=l.useCallback(a=>{let b="",T="";t(v=>v.map(k=>k.id===a?(b=k.name,T=k.status==="active"?"archiviert":"aktiviert",{...k,status:k.status==="active"?"archived":"active"}):k)),C({title:`Tool ${T}`,description:`Das Tool "${b}" wurde ${T}.`}),i(null)},[t,C]),oe=l.useCallback(a=>{let b;t(T=>T.map(v=>v.id===a?(b=!v.isFavorite,{...v,isFavorite:!v.isFavorite}):v)),C({title:b?"Favorit hinzugefügt":"Favorit entfernt",className:"bg-blue-600 text-white"})},[t,C]),ce=l.useCallback(a=>{N(a),C({title:"Kategorien aktualisiert",description:"Deine Tool-Kategorien wurden gespeichert."})},[N,C]),G=l.useMemo(()=>(p||[]).filter(a=>{const b=a.name.toLowerCase().includes(u.toLowerCase())||a.description.toLowerCase().includes(u.toLowerCase()),T=x==="all"||a.category===x,v=!n||a.isFavorite;return b&&T&&v&&a.status==="active"}),[p,u,x,n]);return e.jsxs(e.Fragment,{children:[e.jsxs(ve,{children:[e.jsx("title",{children:"Toolbox - Coachingspace"}),e.jsx("meta",{name:"description",content:"Entdecke professionelle Coaching-Tools und Methoden für effektive Sessions."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Toolbox"}),e.jsx("p",{className:"text-slate-400",children:"Deine digitale Methodenbibliothek"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(h,{onClick:()=>c(!0),variant:"outline",children:[e.jsx(Ne,{className:"mr-2 h-4 w-4"})," Kategorien"]}),e.jsxs(h,{onClick:()=>{o(null),F(!0)},className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Q,{className:"mr-2 h-4 w-4"})," Text-Tool"]}),e.jsxs(h,{onClick:()=>{o(null),A(!0)},variant:"outline",children:[e.jsx(W,{className:"mr-2 h-4 w-4"})," Datei-Tool"]})]})]}),e.jsx(I,{className:"glass-card",children:e.jsxs($,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(E,{placeholder:"Tools suchen...",value:u,onChange:a=>g(a.target.value),className:"pl-10"})]}),e.jsxs(h,{onClick:()=>w(!n),variant:n?"default":"outline",className:"flex-shrink-0",children:[e.jsx(q,{className:`mr-2 h-4 w-4 ${n?"text-yellow-300":""}`})," Favoriten"]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:le.map(a=>e.jsx(h,{variant:x===a?"secondary":"outline",size:"sm",onClick:()=>d(a),children:a==="all"?"Alle":a},a))})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(be,{children:G.map(a=>e.jsx(Ge,{tool:a,onCardClick:i,onToggleFavorite:oe},a.id))})}),G.length===0&&e.jsx(I,{className:"glass-card",children:e.jsxs($,{className:"p-12 text-center",children:[e.jsx(R,{className:"mx-auto h-12 w-12 text-slate-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Keine Tools gefunden"}),e.jsx("p",{className:"text-slate-400",children:"Versuche andere Suchbegriffe oder wähle eine andere Kategorie."})]})})]}),e.jsx(Je,{tool:f,open:!!f,onOpenChange:a=>!a&&i(null),onEdit:ie,onDelete:re,onArchive:ne}),e.jsx(Qe,{open:K,onOpenChange:F,onSave:Z,categories:r,initialData:y}),e.jsx(We,{open:B,onOpenChange:A,onSave:Z,categories:r,initialData:y}),e.jsx(Xe,{open:P,onOpenChange:c,categories:r,updateCategories:ce})]})}export{vs as default};
