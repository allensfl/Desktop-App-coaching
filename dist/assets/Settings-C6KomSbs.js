import{r as x,Q as H,a3 as W,j as e,c as X,P as V,V as G,R as Y,b as M,D as ee,n as se,o as ae,p as te,s as ne,t as ie,B as S,i as L,v as re,k as U,d as ce,H as le,C as oe,F as de,a7 as me,J as he,e as pe,f as xe,g as ue,w as ge,h as je}from"./index-BCVF1PLb.js";import{I as m}from"./input-CMYn3E83.js";import{L as h}from"./label-gCXM_mwv.js";import{u as ve}from"./index-Cxa5liJK.js";import{u as ye}from"./index-B8MATRhp.js";import"./alert-dialog-C4_CwsSl.js";import{S as fe,a as Ne,b as Ce,c as Se,d as B}from"./select-B5ckg96L.js";import{T as be}from"./textarea-Ei5qcXJt.js";import{S as O}from"./save-BLsd0mx1.js";import{B as we,a as ke,L as Fe,S as Te}from"./share-C8NuUQIn.js";import{T as _}from"./trash-2-Doau15tD.js";import{a as De}from"./index-DQa-zP0n.js";import{F as Pe}from"./FileSaver.min-C6hR5fcS.js";import{P as Ee}from"./palette-BCUcZNiS.js";import{P as Be}from"./package-BsT2hppd.js";import{L as Ie}from"./link-CYnfH8i6.js";import{D as Re}from"./download-DKg7zGZ5.js";import"./floating-ui.react-dom-DMRTrF13.js";import"./check-C26bXOMj.js";var I="Switch",[ze,ls]=X(I),[Ae,Le]=ze(I),J=x.forwardRef((o,p)=>{const{__scopeSwitch:t,name:i,checked:v,defaultChecked:f,required:u,disabled:y,value:N="on",onCheckedChange:s,form:c,...a}=o,[n,d]=x.useState(null),b=H(p,P=>d(P)),k=x.useRef(!1),E=n?c||!!n.closest("form"):!0,[D,R]=W({prop:v,defaultProp:f??!1,onChange:s,caller:I});return e.jsxs(Ae,{scope:t,checked:D,disabled:y,children:[e.jsx(V.button,{type:"button",role:"switch","aria-checked":D,"aria-required":u,"data-state":q(D),"data-disabled":y?"":void 0,disabled:y,value:N,...a,ref:b,onClick:G(o.onClick,P=>{R(l=>!l),E&&(k.current=P.isPropagationStopped(),k.current||P.stopPropagation())})}),E&&e.jsx(Z,{control:n,bubbles:!k.current,name:i,value:N,checked:D,required:u,disabled:y,form:c,style:{transform:"translateX(-100%)"}})]})});J.displayName=I;var K="SwitchThumb",$=x.forwardRef((o,p)=>{const{__scopeSwitch:t,...i}=o,v=Le(K,t);return e.jsx(V.span,{"data-state":q(v.checked),"data-disabled":v.disabled?"":void 0,...i,ref:p})});$.displayName=K;var Ue="SwitchBubbleInput",Z=x.forwardRef(({__scopeSwitch:o,control:p,checked:t,bubbles:i=!0,...v},f)=>{const u=x.useRef(null),y=H(u,f),N=ve(t),s=ye(p);return x.useEffect(()=>{const c=u.current;if(!c)return;const a=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(a,"checked").set;if(N!==t&&d){const b=new Event("click",{bubbles:i});d.call(c,t),c.dispatchEvent(b)}},[N,t,i]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...v,tabIndex:-1,ref:y,style:{...v.style,...s,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Z.displayName=Ue;function q(o){return o?"checked":"unchecked"}var Q=J,Oe=$;const A=Y.forwardRef(({className:o,...p},t)=>e.jsx(Q,{className:M("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",o),...p,ref:t,children:e.jsx(Oe,{className:M("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));A.displayName=Q.displayName;const _e=({open:o,onOpenChange:p,onSave:t,template:i})=>{const[v,f]=x.useState(""),[u,y]=x.useState(""),[N,s]=x.useState(""),[c,a]=x.useState("");x.useEffect(()=>{i?(f(i.name),y(i.description),s(String(i.totalUnits)),a(String(i.price))):(f(""),y(""),s(""),a(""))},[i,o]);const n=()=>{const d={id:i?i.id:Date.now(),name:v,description:u,totalUnits:parseInt(N)||0,price:parseFloat(c)||0};t(d)};return e.jsx(ee,{open:o,onOpenChange:p,children:e.jsxs(se,{className:"glass-card",children:[e.jsx(ae,{children:e.jsx(te,{children:i?"Paket-Vorlage bearbeiten":"Neue Paket-Vorlage"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"template-name",children:"Name des Pakets"}),e.jsx(m,{id:"template-name",value:v,onChange:d=>f(d.target.value),placeholder:"z.B. 5er-Paket Karriere-Boost"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"template-desc",children:"Beschreibung"}),e.jsx(be,{id:"template-desc",value:u,onChange:d=>y(d.target.value),placeholder:"z.B. Fünf intensive 60-Minuten-Sessions..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"template-units",children:"Anzahl Sessions/Einheiten"}),e.jsx(m,{id:"template-units",type:"number",value:N,onChange:d=>s(d.target.value),placeholder:"5"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"template-price",children:"Preis (€)"}),e.jsx(m,{id:"template-price",type:"number",value:c,onChange:d=>a(d.target.value),placeholder:"550.00"})]})]})]}),e.jsxs(ne,{children:[e.jsx(ie,{asChild:!0,children:e.jsx(S,{variant:"outline",children:"Abbrechen"})}),e.jsxs(S,{onClick:n,children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Speichern"]})]})]})})},Me=({packageTemplates:o,setPackageTemplates:p})=>{const[t,i]=x.useState(!1),[v,f]=x.useState(null),{toast:u}=L(),y=()=>{f(null),i(!0)},N=a=>{f(a),i(!0)},s=a=>{p(n=>(n||[]).filter(d=>d.id!==a)),u({title:"Paket-Vorlage gelöscht!",className:"bg-green-600 text-white"})},c=a=>{const d=(o||[]).findIndex(b=>b.id===a.id);d>-1?p(b=>{const k=[...b||[]];return k[d]=a,k}):p(b=>[...b||[],a]),i(!1),u({title:"Paket-Vorlage gespeichert!",className:"bg-green-600 text-white"})};return e.jsxs(e.Fragment,{children:[e.jsx(_e,{open:t,onOpenChange:i,onSave:c,template:v}),e.jsxs("div",{className:"space-y-4",children:[(o||[]).map(a=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:a.name}),e.jsxs("p",{className:"text-sm text-slate-400",children:[a.totalUnits," Einheiten"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-lg font-bold text-primary",children:["€",a.price.toFixed(2)]}),e.jsx(S,{variant:"ghost",size:"icon",onClick:()=>N(a),children:e.jsx(re,{className:"h-4 w-4"})}),e.jsx(S,{variant:"ghost",size:"icon",onClick:()=>s(a.id),children:e.jsx(_,{className:"h-4 w-4 text-red-500"})})]})]},a.id)),e.jsxs(S,{onClick:y,className:"mt-4 w-full",variant:"outline",children:[e.jsx(U,{className:"mr-2 h-4 w-4"})," Neue Paket-Vorlage hinzufügen"]})]})]})},F=({icon:o,title:p,description:t,children:i})=>e.jsxs(pe,{className:"glass-card",children:[e.jsxs(xe,{children:[e.jsxs(ue,{className:"flex items-center gap-3 text-white",children:[o,p]}),t&&e.jsx(ge,{children:t})]}),e.jsx(je,{className:"space-y-4",children:i})]}),He=({fields:o,onUpdate:p})=>{const[t,i]=x.useState(o||[]),{toast:v}=L();x.useEffect(()=>{i(o||[])},[o]);const f=()=>{const s={id:`custom_${Date.now()}`,label:"",type:"text"};i([...t,s])},u=(s,c,a)=>{const n=[...t];n[s][c]=a,i(n)},y=s=>{const c=t.filter((a,n)=>n!==s);i(c)},N=()=>{p(t),v({title:"Coachee-Felder gespeichert!",description:"Deine Änderungen sind sofort wirksam."})};return e.jsxs("div",{className:"space-y-4",children:[t.map((s,c)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-800/50 rounded-lg",children:[e.jsx(m,{placeholder:"Feldname (z.B. Branche)",value:s.label,onChange:a=>u(c,"label",a.target.value),className:"flex-grow"}),e.jsxs(fe,{value:s.type,onValueChange:a=>u(c,"type",a),children:[e.jsx(Ne,{className:"w-[120px]",children:e.jsx(Ce,{})}),e.jsxs(Se,{children:[e.jsx(B,{value:"text",children:"Text"}),e.jsx(B,{value:"textarea",children:"Textbereich"}),e.jsx(B,{value:"date",children:"Datum"}),e.jsx(B,{value:"number",children:"Zahl"})]})]}),e.jsx(S,{variant:"ghost",size:"icon",onClick:()=>y(c),children:e.jsx(_,{className:"h-4 w-4 text-red-500"})})]},s.id||c)),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs(S,{variant:"outline",onClick:f,children:[e.jsx(U,{className:"mr-2 h-4 w-4"})," Feld hinzufügen"]}),e.jsxs(S,{onClick:N,children:[e.jsx(O,{className:"mr-2 h-4 w-4"})," Felder speichern"]})]})]})};function os(){const{state:o,actions:p}=ce(),{settings:t,packageTemplates:i,sessions:v,coachees:f}=o,{setSettings:u,setPackageTemplates:y,backupData:N}=p,[s,c]=x.useState(t),{toast:a}=L();x.useEffect(()=>{c(t)},[t]);const n=l=>{const{id:g,value:r}=l.target,j=g.split(".");c(C=>{let T=JSON.parse(JSON.stringify(C)),w=T;for(let z=0;z<j.length-1;z++)w=w[j[z]];return w[j[j.length-1]]=r,T})},d=(l,g)=>{const r=l.split(".");c(j=>{let C=JSON.parse(JSON.stringify(j)),T=C;for(let w=0;w<r.length-1;w++)T=T[r[w]];return T[r[r.length-1]]=g,C})},b=(l,g,r)=>{const j=[...s.remoteTools];j[l][g]=r,c(C=>({...C,remoteTools:j}))},k=()=>{c(l=>({...l,remoteTools:[...l.remoteTools,{name:"",url:""}]}))},E=l=>{const g=s.remoteTools.filter((r,j)=>j!==l);c(r=>({...r,remoteTools:g}))},D=l=>{const g={...s,coacheeFields:l};c(g),u(g)},R=()=>{u(s),a({title:"Einstellungen gespeichert!",description:"Deine Änderungen wurden erfolgreich übernommen."})},P=()=>{const l=(v||[]).filter(r=>r.status===he.PLANNED&&new Date(r.date)>=new Date);if(l.length===0){a({variant:"destructive",title:"Keine zukünftigen Sessions",description:"Es wurden keine geplanten Sessions für den Export gefunden."});return}const g=l.map(r=>{const j=f.find(w=>w.id===r.coacheeId),C=new Date(r.date);return{start:[C.getFullYear(),C.getMonth()+1,C.getDate(),C.getHours(),C.getMinutes()],duration:{minutes:r.duration},title:`Coaching: ${r.topic}`,description:`Coaching Session mit ${r.coacheeName}. Notizen: ${r.coachNotes}`,organizer:{name:t.company.name,email:t.company.email},attendees:[{name:t.company.name,email:t.company.email,rsvp:!0,partstat:"ACCEPTED",role:"REQ-PARTICIPANT"},{name:r.coacheeName,email:(j==null?void 0:j.email)||"",rsvp:!0,partstat:"NEEDS-ACTION",role:"REQ-PARTICIPANT"}]}});De(g,(r,j)=>{if(r){console.error(r),a({variant:"destructive",title:"Fehler",description:"Kalender-Datei konnte nicht erstellt werden."});return}const C=new Blob([j],{type:"text/calendar;charset=utf-8"});Pe.saveAs(C,"Coachingspace_Termine.ics"),a({title:"Kalender-Datei erstellt",description:`${l.length} Sessions wurden exportiert.`})})};return e.jsxs(e.Fragment,{children:[e.jsxs(le,{children:[e.jsx("title",{children:"Einstellungen - Coachingspace"}),e.jsx("meta",{name:"description",content:"Passe dein Coachingspace an deine Bedürfnisse an."})]}),e.jsxs("div",{className:"flex-1 space-y-8 p-4 md:p-8 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight text-white",children:"Einstellungen"}),e.jsx("p",{className:"text-slate-400",children:"Passe dein Coachingspace an deine Bedürfnisse an."})]}),e.jsxs(S,{onClick:R,children:[e.jsx(O,{className:"mr-2 h-4 w-4"})," Änderungen speichern"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs(F,{icon:e.jsx(Ee,{className:"text-primary"}),title:"Branding & Design",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"theme.primaryColor.hex",children:"Primärfarbe (HEX)"}),e.jsx(m,{id:"theme.primaryColor.hex",value:s.theme.primaryColor.hex,onChange:n,placeholder:"#3b82f6"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{htmlFor:"darkMode",children:"Dark Mode"}),e.jsx(A,{id:"darkMode",checked:s.darkMode,onCheckedChange:l=>d("darkMode",l)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"company.logoUrl",children:"Logo URL"}),e.jsx(m,{id:"company.logoUrl",value:s.company.logoUrl,onChange:n,placeholder:"https://beispiel.com/logo.png"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Lade dein Logo bei einem Bild-Hoster hoch und füge den Link hier ein."})]})]}),e.jsx(F,{icon:e.jsx(ke,{className:"text-primary"}),title:"Unternehmensdaten",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"company.name",children:"Firmenname"}),e.jsx(m,{id:"company.name",value:s.company.name,onChange:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"company.owner",children:"Inhaber/in"}),e.jsx(m,{id:"company.owner",value:s.company.owner,onChange:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"company.street",children:"Strasse & Nr."}),e.jsx(m,{id:"company.street",value:s.company.street,onChange:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"company.zip",children:"PLZ"}),e.jsx(m,{id:"company.zip",value:s.company.zip,onChange:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"company.city",children:"Stadt"}),e.jsx(m,{id:"company.city",value:s.company.city,onChange:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"company.country",children:"Land"}),e.jsx(m,{id:"company.country",value:s.company.country,onChange:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"company.phone",children:"Telefon"}),e.jsx(m,{id:"company.phone",value:s.company.phone,onChange:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"company.email",children:"E-Mail"}),e.jsx(m,{id:"company.email",type:"email",value:s.company.email,onChange:n})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(h,{htmlFor:"company.website",children:"Website"}),e.jsx(m,{id:"company.website",value:s.company.website,onChange:n})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(h,{htmlFor:"company.taxId",children:"Steuernummer / USt-IdNr."}),e.jsx(m,{id:"company.taxId",value:s.company.taxId,onChange:n})]})]})}),e.jsx(F,{icon:e.jsx(Fe,{className:"text-primary"}),title:"Coachee-Felder",description:"Definiere eigene Felder für deine Coachee-Profile. Änderungen werden sofort gespeichert.",children:e.jsx(He,{fields:s.coacheeFields,onUpdate:D})}),e.jsxs(F,{icon:e.jsx(oe,{className:"text-primary"}),title:"Kalender-Synchronisation",children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Exportiere alle deine zukünftigen Sessions als .ics-Datei, um sie in deinen externen Kalender (Google, Outlook, etc.) zu importieren."}),e.jsxs(S,{variant:"secondary",onClick:P,className:"w-full",children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),"Alle zukünftigen Sessions exportieren"]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs(F,{icon:e.jsx(de,{className:"text-primary"}),title:"Rechnungen & Finanzen",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"company.bankName",children:"Bank"}),e.jsx(m,{id:"company.bankName",value:s.company.bankName,onChange:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"company.iban",children:"IBAN"}),e.jsx(m,{id:"company.iban",value:s.company.iban,onChange:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"company.paymentDeadlineDays",children:"Zahlungsfrist (Tage)"}),e.jsx(m,{id:"company.paymentDeadlineDays",type:"number",value:s.company.paymentDeadlineDays,onChange:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"company.defaultTaxRate",children:"Standard-Steuersatz (%)"}),e.jsx(m,{id:"company.defaultTaxRate",type:"number",value:s.company.defaultTaxRate,onChange:n})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx(h,{htmlFor:"company.showBankDetailsOnInvoice",children:"Bankverbindung auf Rechnungen anzeigen"}),e.jsx(A,{id:"company.showBankDetailsOnInvoice",checked:s.company.showBankDetailsOnInvoice,onCheckedChange:l=>d("company.showBankDetailsOnInvoice",l)})]})]}),e.jsx(F,{icon:e.jsx(Be,{className:"text-primary"}),title:"Coaching-Pakete",description:"Definiere Vorlagen für deine Coaching-Pakete.",children:e.jsx(Me,{packageTemplates:i,setPackageTemplates:y})}),e.jsxs(F,{icon:e.jsx(Ie,{className:"text-primary"}),title:"Remote-Tools",children:[s.remoteTools.map((l,g)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{placeholder:"Name (z.B. Zoom)",value:l.name,onChange:r=>b(g,"name",r.target.value)}),e.jsx(m,{placeholder:"URL",value:l.url,onChange:r=>b(g,"url",r.target.value)}),e.jsx(S,{variant:"ghost",size:"icon",onClick:()=>E(g),children:e.jsx(_,{className:"h-4 w-4 text-red-500"})})]},g)),e.jsxs(S,{variant:"outline",onClick:k,children:[e.jsx(U,{className:"mr-2 h-4 w-4"})," Tool hinzufügen"]})]}),e.jsxs(F,{icon:e.jsx(me,{className:"text-primary"}),title:"Daten & Backup",children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Sichere deine gesamten App-Daten als JSON-Datei. Dies beinhaltet Coachees, Sessions, Rechnungen und Einstellungen."}),e.jsxs(S,{variant:"secondary",onClick:N,className:"w-full",children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Daten-Backup herunterladen"]})]})]})]})]})]})}export{os as default};
