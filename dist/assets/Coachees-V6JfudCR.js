import{r as b,i as F,d as O,j as e,H as z,B as p,k as y,e as T,h as E,S as V,l as t,m as M,f as $,L as k,g as U,D as B,n as H,o as q,p as K,q as Z,s as G,t as R}from"./index-BCVF1PLb.js";import{I as c}from"./input-CMYn3E83.js";import{B as A}from"./badge-EtFkFwpi.js";import{L as h}from"./label-gCXM_mwv.js";import{T as P}from"./textarea-Ei5qcXJt.js";import{S as J,a as Q,b as W,c as X,d as v}from"./select-B5ckg96L.js";import{S as Y}from"./shield-check-BtYFX98R.js";import{S as _,M as ee}from"./shield-off-DNL0mmHJ.js";import{S as se}from"./send-DnfGf0z0.js";import{U as ae}from"./user-CaCbtgVu.js";import"./floating-ui.react-dom-DMRTrF13.js";import"./check-C26bXOMj.js";const te=({field:n,value:x,onChange:o})=>{const i={id:n.id,value:x||"",onChange:o,className:"mt-1"};switch(n.type){case"textarea":return e.jsx(P,{...i});case"date":return e.jsx(c,{type:"date",...i});case"number":return e.jsx(c,{type:"number",...i});case"text":default:return e.jsx(c,{type:"text",...i})}},le=({open:n,onOpenChange:x,addCoachee:o,customFields:i})=>{const{toast:N}=F(),[a,u]=b.useState({firstName:"",lastName:"",email:"",phone:"",pronouns:"",status:t.POTENTIAL,mainTopic:"",tags:"",customData:{}}),d=l=>{const{id:m,value:r}=l.target;u(g=>({...g,[m]:r}))},C=l=>{const{id:m,value:r}=l.target;u(g=>({...g,customData:{...g.customData,[m]:r}}))},w=l=>{u(m=>({...m,status:l}))},S=l=>{if(l.preventDefault(),!a.firstName||!a.lastName||!a.email){N({variant:"destructive",title:"Fehler: Fehlende Informationen",description:"Bitte fülle Vorname, Nachname und E-Mail aus."});return}const m={...a,tags:a.tags.split(",").map(r=>r.trim()).filter(r=>r),coachingStartDate:new Date().toISOString(),lastContactDate:new Date().toISOString(),shortNote:"",confidentialNotes:"",quickNotes:[]};o(m),N({title:"✅ Coachee erstellt!",description:`${a.firstName} ${a.lastName} wurde erfolgreich angelegt.`}),u({firstName:"",lastName:"",email:"",phone:"",pronouns:"",status:t.POTENTIAL,mainTopic:"",tags:"",customData:{}}),x(!1)};return e.jsx(B,{open:n,onOpenChange:x,children:e.jsxs(H,{className:"sm:max-w-2xl glass-card",children:[e.jsxs(q,{children:[e.jsx(K,{className:"text-2xl",children:"Neuen Coachee anlegen"}),e.jsx(Z,{children:"Fülle die Informationen aus, um einen neuen Klienten zu deinem System hinzuzufügen."})]}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"grid gap-4 py-4 max-h-[60vh] overflow-y-auto pr-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"firstName",children:"Vorname"}),e.jsx(c,{id:"firstName",value:a.firstName,onChange:d,placeholder:"Max",required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"lastName",children:"Nachname"}),e.jsx(c,{id:"lastName",value:a.lastName,onChange:d,placeholder:"Mustermann",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"email",children:"E-Mail"}),e.jsx(c,{id:"email",type:"email",value:a.email,onChange:d,placeholder:"max@example.com",required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"phone",children:"Telefon"}),e.jsx(c,{id:"phone",value:a.phone,onChange:d,placeholder:"+49 123 456789"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"pronouns",children:"Anrede/Pronomen"}),e.jsx(c,{id:"pronouns",value:a.pronouns,onChange:d,placeholder:"Er/Ihm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"status",children:"Status"}),e.jsxs(J,{value:a.status,onValueChange:w,children:[e.jsx(Q,{children:e.jsx(W,{placeholder:"Status auswählen"})}),e.jsxs(X,{children:[e.jsx(v,{value:t.POTENTIAL,children:"Potenziell"}),e.jsx(v,{value:t.ACTIVE,children:"Aktiv"}),e.jsx(v,{value:t.PAUSED,children:"Pausiert"}),e.jsx(v,{value:t.COMPLETED,children:"Abgeschlossen"})]})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"mainTopic",children:"Hauptthema/Anliegen"}),e.jsx(P,{id:"mainTopic",value:a.mainTopic,onChange:d,placeholder:"Beschreibe das Hauptanliegen des Coachees..."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"tags",children:"Tags (kommagetrennt)"}),e.jsx(c,{id:"tags",value:a.tags,onChange:d,placeholder:"Führungskraft, Karriere, Startup"})]}),i&&i.length>0&&e.jsxs("div",{className:"pt-4 border-t border-slate-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Zusätzliche Informationen"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(l=>e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:l.id,children:l.label}),e.jsx(te,{field:l,value:a.customData[l.id],onChange:C})]},l.id))})]})]}),e.jsxs(G,{children:[e.jsx(R,{asChild:!0,children:e.jsx(p,{type:"button",variant:"outline",children:"Abbrechen"})}),e.jsx(p,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:"Coachee speichern"})]})]})]})})};function je(){const[n,x]=b.useState(""),[o,i]=b.useState("all"),[N,a]=b.useState(!1),{toast:u}=F(),{state:d,actions:C}=O(),{coachees:w,settings:S}=d,{addCoachee:l}=C,m=s=>{const f=`${window.location.origin}/consent/${s}`;navigator.clipboard.writeText(f),u({title:"✅ Link kopiert!",description:"Der Einladungslink wurde in die Zwischenablage kopiert. Sende ihn jetzt an deinen Coachee!"})},r=(w||[]).filter(s=>{const j=`${s.firstName} ${s.lastName}`.toLowerCase().includes(n.toLowerCase())||s.email.toLowerCase().includes(n.toLowerCase()),D=o==="all"||s.status===o;return j&&D}),g=s=>{switch(s){case t.ACTIVE:return"status-active";case t.COMPLETED:return"bg-slate-500/20 text-slate-400 border-slate-500/30";case t.PAUSED:return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case t.POTENTIAL:return"status-pending";default:return"status-inactive"}},L=s=>{switch(s){case t.ACTIVE:return"Aktiv";case t.COMPLETED:return"Abgeschlossen";case t.PAUSED:return"Pausiert";case t.POTENTIAL:return"Potenziell";default:return"Unbekannt"}},I=[{value:"all",label:"Alle"},{value:t.ACTIVE,label:"Aktiv"},{value:t.POTENTIAL,label:"Potenziell"},{value:t.PAUSED,label:"Pausiert"},{value:t.COMPLETED,label:"Abgeschlossen"}];return e.jsxs(e.Fragment,{children:[e.jsxs(z,{children:[e.jsx("title",{children:"Coachees - Coachingspace"}),e.jsx("meta",{name:"description",content:"Verwalte deine Coaching-Klienten, behalte den Überblick über Sessions und Fortschritte."})]}),e.jsx(le,{open:N,onOpenChange:a,addCoachee:l,customFields:S.coacheeFields}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Coachees"}),e.jsx("p",{className:"text-slate-400",children:"Verwalte deine Coaching-Klienten"})]}),e.jsxs(p,{onClick:()=>a(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Neuer Coachee"]})]}),e.jsx(T,{className:"glass-card",children:e.jsx(E,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(V,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(c,{placeholder:"Coachees suchen...",value:n,onChange:s=>x(s.target.value),className:"pl-10"})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:I.map(s=>e.jsx(p,{variant:o===s.value?"default":"outline",size:"sm",onClick:()=>i(s.value),children:s.label},s.value))})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map((s,f)=>e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:f*.1},className:"h-full",children:e.jsxs(T,{className:"glass-card hover:bg-slate-800/50 transition-all duration-300 group h-full flex flex-col",children:[e.jsx($,{className:"pb-3",children:e.jsx(k,{to:`/coachees/${s.id}`,className:"block",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-white font-semibold text-sm",children:[s.firstName[0],s.lastName[0]]})}),e.jsxs("div",{children:[e.jsxs(U,{className:"text-white group-hover:text-blue-400 transition-colors text-lg",children:[s.firstName," ",s.lastName]}),e.jsx(A,{className:`text-xs ${g(s.status)}`,children:L(s.status)})]})]}),s.consents.gdpr?e.jsx(Y,{className:"h-5 w-5 text-green-400 flex-shrink-0",title:"DSGVO-Zustimmung erteilt"}):e.jsx(_,{className:"h-5 w-5 text-red-400 flex-shrink-0",title:"DSGVO-Zustimmung fehlt"})]})})}),e.jsxs(E,{className:"flex-grow flex flex-col justify-between",children:[e.jsx(k,{to:`/coachees/${s.id}`,className:"block flex-grow",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-slate-400",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),s.email]}),e.jsx("p",{className:"text-sm text-slate-300 line-clamp-2",children:s.mainTopic}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.tags.map((j,D)=>e.jsx(A,{variant:"outline",className:"text-xs",children:j},D))})]})}),e.jsx("div",{className:"pt-3 mt-auto",children:s.consents.gdpr?e.jsxs("div",{className:"flex justify-between text-xs text-slate-500 pt-3 border-t border-slate-700",children:[e.jsxs("span",{children:[s.sessions.length," Sessions"]}),e.jsxs("span",{children:["Seit ",new Date(s.coachingStartDate).toLocaleDateString("de-DE")]})]}):e.jsxs(p,{size:"sm",className:"w-full bg-yellow-600 hover:bg-yellow-700 text-white",onClick:j=>{j.stopPropagation(),m(s.id)},children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),"Einladung zur DSGVO senden"]})})]})]})},s.id))}),r.length===0&&e.jsx(T,{className:"glass-card",children:e.jsxs(E,{className:"p-12 text-center",children:[e.jsx(ae,{className:"mx-auto h-12 w-12 text-slate-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Keine Coachees gefunden"}),e.jsx("p",{className:"text-slate-400 mb-4",children:n||o!=="all"?"Versuche andere Suchbegriffe oder Filter.":"Füge deinen ersten Coachee hinzu, um zu beginnen."}),!n&&o==="all"&&e.jsxs(p,{onClick:()=>a(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Ersten Coachee hinzufügen"]})]})})]})]})}export{je as default};
